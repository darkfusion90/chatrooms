(this.webpackJsonpchatrooms=this.webpackJsonpchatrooms||[]).push([[0],{136:function(e,t,n){},212:function(e,t,n){e.exports=n(377)},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},372:function(e,t){},375:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),i=n(11),s=n(12),l=n(191),u=n(402),m={connected:!1},d=n(43),p=n(53),f=n(208),h={length:0,data:{}},g={isLoggedIn:!1,user:{}},E=Object(i.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{isLoggedIn:!0,user:t.payload.user};case"LOGOUT":return g;case"REGISTER":return{isLoggedIn:!1,user:t.payload.user};case"UPDATE_USER":return Object(p.a)({},e,{},t.payload);default:return e}},serverConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return"CONNECT_TO_SERVER"===t.type?{connected:t.payload.connected}:e},roomMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"CREATE_ROOM":case"JOIN_ROOM":return Object(p.a)({},e,Object(d.a)({},n.id,n));default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTIFICATION":var n=t.payload,a=n.id,o=Object(f.a)(n,["id"]);return console.log("id: "+a+"\nmetadata:"),console.log(o),Object(p.a)({},e,{length:e.length+1,data:Object(p.a)({},e.data,Object(d.a)({},a,o))});default:return e}},form:u.a}),b=n(15),v=n(16),y=n(18),O=n(17),w=n(19),j=n(55),C=n(24),S=n(22),R=n(145),k=n(209),F=n(61),N=n(105),M=n(82),I=n(85),A=n(207),P=n(114),L=function(e){return o.a.createElement(A.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:o.a.createElement(P.a,null,o.a.createElement(P.a.Title,{as:"h2"},e.title),o.a.createElement(P.a.Content,null,e.menu))},e.triggerComponent)},U=n(21),T=n.n(U),_=n(196),x=n.n(_).a.create({withCredentials:!0}),V=function(e,t,n,a,o){x.post("/api/register",{username:e,password:t,confirmPassword:n}).then(a,o)},D=function(e,t,n,a){x.post("/api/login",{username:e,password:t}).then(n,a)},B=function(e,t,n){x.get("/api/user/".concat(e)).then(t,n)},J=function(e,t,n,a){x.post("/api/rooms",{roomName:e,roomType:t}).then(n,a)},G=(n(300),function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).onLogoutButtonClick=function(){n.props.logoutUser()},n.renderTriggerComponent=function(){return o.a.createElement(F.a,{as:"span",className:"header-icon"},o.a.createElement(M.a,{icon:I.c,size:"lg"}))},n.renderTitle=function(){return o.a.createElement("span",{style:{fontWeight:"normal"}},"Signed in as ",o.a.createElement("strong",null,n.props.username))},n.renderMenu=function(){return o.a.createElement("div",{className:"user-info-dropdown-menu-container"},o.a.createElement(S.a,{variant:"outline-secondary",onClick:n.onLogoutButtonClick},"Log Out"))},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement(L,{title:this.renderTitle(),menu:this.renderMenu(),triggerComponent:this.renderTriggerComponent()})}}]),t}(o.a.Component)),H=Object(s.b)((function(e){return{username:e.user.user.username}}),{logoutUser:function(){return function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){return e({type:"LOGOUT"})},a=function(e){var t=e.response;return console.log("Logout Failed: ",t)},x.post("/api/logout").then(n,a);case 1:case"end":return t.stop()}var n,a}))}}})(G),z=function(e){var t=e.shouldShowBadge?"visible":"hidden";return o.a.createElement(M.a,{icon:I.a,size:"lg"},o.a.createElement(M.a,{icon:I.b,style:{visibility:t}}))},W=n(197),q=o.a.forwardRef((function(e,t){var n=e.children,a=e.className,r=e.style;return o.a.createElement("div",{ref:t,className:a,style:r},n)})),Y=function(e){return console.log("item. title: "+e.notification.title),o.a.createElement(W.a,{as:q},"nblah abl blhjljaljgjjkfgklkjkgjkfgjfkgj")},X=(n(301),function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(v.a)(t,[{key:"getDropdownMenu",value:function(){var e=this.props.notifications;return 0===e.length?o.a.createElement("div",{className:"item"},"You don't have any notifications"):Object.keys(e.data).map((function(t){return o.a.createElement("div",{key:t},o.a.createElement(Y,{notification:e.data[t]}),o.a.createElement("hr",null))}))}},{key:"getWrappedNotificationIcon",value:function(){return o.a.createElement("span",{className:"header-icon nav-item"},o.a.createElement(z,{shouldShowBadge:0!==this.props.notifications.length}))}},{key:"render",value:function(){return o.a.createElement(L,{title:"Notifications",menu:this.getDropdownMenu(),triggerComponent:this.getWrappedNotificationIcon()})}}]),t}(o.a.Component)),K=Object(s.b)((function(e){return{notifications:e.notifications}}),null)(X),Q=(n(302),{backgroundColor:"#23282d"}),Z=Object(s.b)((function(e){return{isUserLoggedIn:e.user.isLoggedIn}}),null)((function(e){return o.a.createElement(R.a,{collapseOnSelect:!0,style:Q,expand:"large",sticky:"top"},o.a.createElement(N.a,null,o.a.createElement(R.a.Brand,null,o.a.createElement(C.b,{to:"/",className:"logo"}," ChatRooms ")),o.a.createElement(k.a,{className:"justify-content-end flex-row"},o.a.createElement("div",{className:"header-item-container"},o.a.createElement(C.b,{to:"/rooms",className:"header-text"},"Rooms")),o.a.createElement("div",{className:"header-item-container"},o.a.createElement(K,null)),e.isUserLoggedIn?o.a.createElement(H,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(C.b,{to:"/login"},o.a.createElement(F.a,{as:"span",className:"header-icon"},o.a.createElement(S.a,{size:"sm"},"Login"))),o.a.createElement(C.b,{to:"/register"},o.a.createElement(F.a,{as:"span",className:"header-icon"},o.a.createElement(S.a,{size:"sm"},"Register")))))))})),$=function(e){return o.a.createElement("div",{className:"app"},o.a.createElement(Z,null),e.children)},ee=(n(305),n(35)),te=n(400),ne=n(405),ae=n(200),oe=n.n(ae),re=n(202),ce=n.n(re),ie=n(203),se=n.n(ie),le=n(201),ue=n.n(le),me=n(112),de=n(395),pe=Object(de.a)((function(e){return{success:{backgroundColor:me.a[600]},error:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})),fe={success:oe.a,warning:ue.a,error:ce.a,info:se.a},he=function(e){if(!e.show)return null;var t=pe(),n=fe[e.variant];return o.a.createElement(te.a,{open:e.show,autoHideDuration:e.autoHideDuration||3e3,onClose:e.onClose},o.a.createElement(ne.a,{className:Object(ee.a)(t[e.variant]),message:o.a.createElement("span",{className:t.message},o.a.createElement(n,{className:Object(ee.a)(t.icon,t.iconVariant)}),e.message),action:e.actions}))},ge=function(e){return o.a.createElement(he,{header:e.header,message:e.message,show:e.show,onClose:e.onSnackbarClose,variant:e.Variant,actions:e.actions,autoHideDuration:e.autoHideDuration||3e3})},Ee=n(75),be=function(e){return o.a.createElement(Ee.a,{show:e.visible,onHide:e.hideModal,centered:!0},o.a.createElement(Ee.a.Header,{closeButton:!0,onHide:e.hideModal},o.a.createElement(Ee.a.Title,null,e.header)),o.a.createElement(Ee.a.Body,null,e.content),o.a.createElement(Ee.a.Footer,null,e.actions))},ve=function(e,t,n,a){return function(o){return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:J(e,t,(function(e){o({type:"CREATE_ROOM",payload:e.data}),n()}),a);case 1:case"end":return r.stop()}}))}},ye=n(399),Oe=n(398),we=n(401),je=n(142),Ce=n(204),Se=n(205),Re=(n(306),[{label:"Private",value:"private"},{label:"Public",value:"public"},{label:"Unlisted",value:"unlisted"}]),ke=function(e){var t=e.input,n=e.meta,a=e.options,r=n.touched&&n.error,c=!n.pristine&&!r,i=a.map((function(e){return o.a.createElement(we.a.Group,{controlId:"roomType-".concat(e.value),key:e.value},o.a.createElement(we.a.Check,Object.assign({},t,e,{type:"radio",isInvalid:r,isValid:c})))}));return o.a.createElement(we.a.Group,{controlId:"create-room-form-type"},o.a.createElement(we.a.Label,null,o.a.createElement("strong",null,"Select Room Type:")),i,r&&o.a.createElement(je.a,{variant:"danger"},n.error))},Fe=function(e){var t=e.input,n=e.meta,a=n.touched&&n.error,r=!n.pristine&&!a;return o.a.createElement(Ce.a,{controlId:"create-room-form-name"},o.a.createElement(we.a.Label,null,o.a.createElement("strong",null,e.label)),o.a.createElement(Se.a,Object.assign({},e,t,{isInvalid:a,isValid:r})),o.a.createElement(we.a.Control.Feedback,{size:"lg",type:"invalid"},n.error))},Ne=Object(Oe.a)({form:"createRoomForm",validate:function(e){var t={};return e.roomName||(t.roomName="Room name cannot be empty"),e.roomType||(t.roomType="Please choose one of the room types above"),t}})((function(e){return o.a.createElement(we.a,{noValidate:!0,id:"create-room-form",onSubmit:e.handleSubmit(e.onFormSubmit)},o.a.createElement(ye.a,{component:Fe,name:"roomName",label:"Enter Room Name:",placeholder:"Example: room_for_dolphins",required:!0}),o.a.createElement("hr",null),o.a.createElement(ye.a,{component:ke,options:Re,name:"roomType"}))})),Me=function(e){var t=!e.dismissAction;return o.a.createElement(je.a,{show:e.show,variant:e.variant,onClose:e.onDismiss,dismissible:t},o.a.createElement(je.a.Heading,null,e.heading),o.a.createElement("p",null,e.body),o.a.createElement("div",{className:"d-flex justify-content-end"},e.dismissAction&&e.dismissAction()))},Ie=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={alert:{show:!1}},n.onFormSubmit=function(e){var t=e.roomName,a=e.roomType;n.props.createRoom(t,a,n.onSuccess,n.onFailure)},n.onSuccess=function(){n.showAlert("success","Your room was successfully created")},n.onFailure=function(){n.showAlert("danger","Oops! Your room couldn't be created")},n.showAlert=function(e,t){n.setState({alert:{show:!0,variant:e,body:t}})},n.hideAlert=function(){n.setState({alert:{show:!1}})},n.onCancelButtonClick=function(){n.hideAlert(),n.props.hideModal()},n.getAlertDismissAction=function(){return n.state.alert.show?"danger"===n.state.alert.variant?null:o.a.createElement(S.a,{variant:"outline-success",onClick:function(){n.hideAlert(),n.props.hideModal()}},"Back to home"):null},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"getModalActions",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{variant:"secondary",onClick:this.onCancelButtonClick},"Cancel"),o.a.createElement(S.a,{form:"create-room-form",type:"submit"},"Create Room"))}},{key:"getModalContent",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,Object.assign({},this.state.alert,{onDismiss:this.hideAlert,dismissAction:this.getAlertDismissAction})),o.a.createElement(Ne,{onFormSubmit:this.onFormSubmit}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(be,Object.assign({header:"Create Room",actions:this.getModalActions(),content:this.getModalContent()},this.props)))}}]),t}(o.a.Component),Ae=Object(s.b)(null,{createRoom:ve})(Ie),Pe=n(206),Le="event:room",Ue="room_join_permission_recieve",Te="join_room",_e="event:user",xe="CHECK_USERNAME",Ve=n.n(Pe)()("/",{autoConnect:!1}),De=function(e){Ve.connect(),Ve.on("connect_error",e)},Be=function(e,t){return Ve.emit(Le,Te,e,t)},Je=function(e,t,n,a,o){return function(r){return T.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,T.a.awrap(Be(e,(function(c){var i;"ok"===c.status?(r({type:"JOIN_ROOM",payload:e}),t()):"permission_pending"===c.status?(n(),i=a,Ve.on(Le,Ue,i)):o(c.reason)})));case 2:case"end":return c.stop()}}))}},Ge=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:"",isFormLoading:!1},n.onFormSubmit=function(e){e.preventDefault(),n.setState({isFormLoading:!0}),n.props.tryJoiningRoom(n.state.inputValue,n.props.onSuccess,n.props.onPermissionPending,n.props.onJoinRoomPermissionRecieved,n.props.onFailure)},n.inputChanged=function(e){n.setState({inputValue:e.target.value,errorMessage:null})},n.onCancelButtonClick=function(){n.setState({inputValue:"",isFormLoading:!1}),n.props.hideModal()},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"getModalActions",value:function(){var e=this.state.isFormLoading?"disabled":"";return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ui button",onClick:this.onCancelButtonClick},"Cancel"),o.a.createElement("button",{type:"submit",form:"join-room-form",className:"ui button orange ".concat(e)},"Join"))}},{key:"getModalContent",value:function(){var e=this.state.isFormLoading?"loading":"";return o.a.createElement("form",{className:"ui form ".concat(e),id:"join-room-form",onSubmit:this.onFormSubmit},o.a.createElement("div",{className:"required field"},o.a.createElement("label",null,"Enter Room ID:"),o.a.createElement("input",{type:"text",placeholder:"Room Number",value:this.state.inputValue,onChange:this.inputChanged,autoFocus:!0,required:!0})))}},{key:"render",value:function(){return o.a.createElement(be,Object.assign({header:"Join Room",actions:this.getModalActions(),content:this.getModalContent()},this.props))}}]),t}(o.a.Component),He=Object(s.b)(null,{tryJoiningRoom:Je})(Ge),ze=function(e){return"create"===e.name?o.a.createElement(Ae,e):o.a.createElement(He,e)},We=function(e){return o.a.createElement("div",{className:"landing-page"},o.a.createElement("div",{className:"inner-wrapper"},o.a.createElement("p",null,"Welcome to Chatrooms!"),o.a.createElement("div",{className:"buttons-container"},o.a.createElement(S.a,{onClick:e.onCreateRoomButtonClick},"Create Room"),o.a.createElement(S.a,{onClick:e.onJoinRoomButtonClick},"Join Room"))),o.a.createElement(ze,e.modalProps),o.a.createElement(ge,e.snackbarProps))},qe=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={shouldShowSnackbar:!1,snackbarMessage:"",snackbarVariant:"info",shouldShowModal:!1,modalName:null},n.capitalizeFirstWord=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)},n.getSuccessMessage=function(e){switch(e){case"create-room":return"Room created Successfully!";case"join-room":return"Room joined Successfully!";default:return"Operation Successful!"}},n.getFailureMessage=function(e,t){switch(t=n.capitalizeFirstWord(t),e){case"create-room":return"Failed to create Room! Reason: ".concat(t);case"join-room":return"Failed to join Room! Reason: ".concat(t);default:return"Operation Failed!"}},n.onSuccess=function(e){console.log("landing page on success callback"),n.hideModal();var t=n.getSuccessMessage(e);n.showSnackbar("success",t)},n.onFailure=function(e,t){console.log("landing page on failure callback"),n.hideModal();var a=n.getFailureMessage(e,t);n.showSnackbar("error",a)},n.onJoinRoomPermissionPending=function(){console.log("mewo"),n.showSnackbar("info","Private Room. Waiting for permission from Room owner")},n.onJoinRoomPermissionRecieved=function(e){"ok"===e?(n.hideModal(),n.showSnackbar("success","Room access permission granted!")):(n.hideModal(),n.showSnackbar("error","Room access permission rejected!"))},n.showModal=function(e){n.setState({shouldShowModal:!0,modalName:e})},n.hideModal=function(){n.setState({shouldShowModal:!1})},n.showSnackbar=function(e,t){n.setState({shouldShowSnackbar:!0,snackbarVariant:e,snackbarMessage:t})},n.onSnackbarClose=function(){n.setState({shouldShowSnackbar:!1,snackbarVariant:"info",snackbarMessage:""})},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"getModalProps",value:function(){return{name:this.state.modalName,hideModal:this.hideModal,visible:this.state.shouldShowModal,onSuccess:this.onSuccess,onFailure:this.onFailure,onPermissionPending:this.onJoinRoomPermissionPending}}},{key:"getSnackbarProps",value:function(){return{onClose:this.onSnackbarClose}}},{key:"render",value:function(){var e=this;return o.a.createElement(We,{modalProps:this.getModalProps(),onCreateRoomButtonClick:function(){return e.showModal("create")},onJoinRoomButtonClick:function(){return e.showModal("join")}})}}]),t}(o.a.Component),Ye=(n(136),function(){return console.log("component connection failed"),o.a.createElement("div",{className:"error"},"Oops! Unable to connect to the server. Please visit later")}),Xe=function(){return o.a.createElement("div",{className:"error"},"Error 404: Page Not Found.",o.a.createElement(C.b,{to:"/"},o.a.createElement(S.a,null,"Home")))},Ke=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(we.a.Label,null,e.label),o.a.createElement(Se.a,Object.assign({},e.input,{type:e.type,placeholder:e.placeholder,required:!0})))},Qe=Object(Oe.a)({form:"loginForm"})((function(e){return o.a.createElement(we.a,{onSubmit:e.handleSubmit(e.onFormSubmit)},o.a.createElement(Ce.a,{controlId:"formUsernameGroup"},o.a.createElement(ye.a,{component:Ke,name:"username",type:"text",label:"Enter Username",placeholder:"Example: mitsy_the_cat"})),o.a.createElement(Ce.a,{controlId:"formPasswordGroup"},o.a.createElement(ye.a,{component:Ke,name:"password",type:"password",label:"Enter Password",placeholder:"Password"})),o.a.createElement(S.a,{type:"submit"},"Login"))})),Ze=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={hasLoginError:!1,errorReason:null,showErrorAlert:!1},n.onLoginFailure=function(e){var t=e.response;n.setState({hasLoginError:!0,errorReason:t.data.reason,showErrorAlert:!0})},n.onFormSubmit=function(e){n.props.loginUser(e.username,e.password,n.onLoginFailure)},n.renderAppropriateContentIfRedirect=function(e){var t=e.location.state;if(t&&t.isRedirectFromSuccessfulRegister)return o.a.createElement(je.a,{variant:"success"},o.a.createElement(je.a.Heading,null,"Registration Completed!"),o.a.createElement("p",null,"Please login to continue"))},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;return this.props.isUserLoggedIn?o.a.createElement(j.a,{to:"/"}):o.a.createElement("div",{className:"centered-content"},o.a.createElement(N.a,null,this.renderAppropriateContentIfRedirect(this.props),o.a.createElement(Me,{variant:"danger",heading:"Login Unsuccessful",body:this.state.errorReason,show:this.state.showErrorAlert,onDismiss:function(){return e.setState({showErrorAlert:!1})}}),o.a.createElement(Qe,{onFormSubmit:this.onFormSubmit})))}}]),t}(o.a.Component),$e=Object(s.b)((function(e){return{isUserLoggedIn:e.user.isLoggedIn}}),{loginUser:function(e,t,n){return function(a){return T.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:D(e,t,(function(e){a({type:"LOGIN",payload:{user:e.data}})}),n);case 2:case"end":return o.stop()}}))}}})(Ze),et=(n(375),function(e){var t=e.meta,n=t.touched,a=t.error,r=t.pristine,c=t.asyncValidating,i=tt(a)||n&&a;return o.a.createElement(o.a.Fragment,null,o.a.createElement(we.a.Label,null,e.label),o.a.createElement(Se.a,Object.assign({className:c?"loading":""},e.input,e,{isInvalid:i,isValid:!c&&!r&&!i})),o.a.createElement(Se.a.Feedback,{type:"invalid"},a))}),tt=function(e){return"That username is already taken"===e},nt=Object(Oe.a)({form:"registerForm",validate:function(e){var t=e.username,n=e.password,a=e.confirmPassword,o={};return t||(o.username="Username cannot be empty"),n||(o.password="Password cannot be empty"),a?function(e,t){return e!==t}(n,a)&&(o.confirmPassword="Confirm Password and Password must match"):o.confirmPassword="Confirm Password cannot be empty",o},asyncValidate:function(e,t){return new Promise((function(t,n){return a=e.username,o=function(e){200===e.status?n({username:"That username is already taken"}):t()},console.log("will emit"),Ve.emit(_e,xe,a,o);var a,o}))},asyncChangeFields:["username"]})((function(e){var t=e.pristine,n=e.submitting,a=e.asyncValidating,r=e.invalid,c=t||n||a||r,i={cursor:c?"not-allowed":"pointer"};return o.a.createElement(we.a,{id:"registration-form",noValidate:!0,onSubmit:e.handleSubmit(e.onFormSubmit)},o.a.createElement(Ce.a,{controlId:"formUsernameGroup"},o.a.createElement(ye.a,{component:et,name:"username",type:"text",label:"Enter Username",placeholder:"Example: mitsy_the_cat"})),o.a.createElement(Ce.a,{controlId:"formPasswordGroup"},o.a.createElement(ye.a,{component:et,name:"password",type:"password",label:"Enter Password",placeholder:"Password"})),o.a.createElement(Ce.a,{controlId:"formConfirmPasswordGroup"},o.a.createElement(ye.a,{component:et,name:"confirmPassword",type:"password",label:"Confirm Password",placeholder:"Confirm Password"})),o.a.createElement(S.a,{type:"submit",form:"registration-form",disabled:c,style:i},"Register"))})),at=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).onRegistrationFailed=function(e){var t=e.response;console.log("Registration failed: ",t)},n.onFormSubmit=function(e){console.log("Registration Form Values: ",e),n.props.registerUser(e.username,e.password,e.confirmPassword,n.onRegistrationFailed)},n.renderAppropriateRedirect=function(e){return e?o.a.createElement(j.a,{to:"/"}):o.a.createElement(j.a,{to:{pathname:"/login",state:{isRedirectFromSuccessfulRegister:!0}}})},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return this.props.isUserLoggedIn?o.a.createElement(j.a,{to:"/"}):this.props.isUserRegistered?this.renderAppropriateRedirect(this.props.isUserLoggedIn):o.a.createElement("div",{className:"centered-content"},o.a.createElement(N.a,null,o.a.createElement(nt,{onFormSubmit:this.onFormSubmit})))}}]),t}(o.a.Component),ot=Object(s.b)((function(e){return{isUserRegistered:e.user.user.isRegistered,isUserLoggedIn:e.user.isLoggedIn}}),{registerUser:function(e,t,n,a){return function(o){return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:V(e,t,n,(function(e){return o({type:"REGISTER",payload:e.data})}),a);case 1:case"end":return r.stop()}}))}}})(at),rt=n(403),ct=n(404),it=function(e){return o.a.createElement(rt.a,{variant:"flush"},e.rooms.map((function(e){var t=e.roomId,n=e.name,a=e.owner;return o.a.createElement(rt.a.Item,{key:t},o.a.createElement(ct.a,null,o.a.createElement(ct.a.Body,null,o.a.createElement(ct.a.Title,null,o.a.createElement(C.b,{to:"/rooms/".concat(t)},n)),o.a.createElement(ct.a.Text,null,"Created by: ",a))))})))},st=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={rooms:[],users:{}},n.onRoomFetchFail=function(e){var t=e.response;console.log("RoomList fetch fail: ",t)},n.onRoomFetchSuccess=function(e){console.log("RoomList fetch success: ",e);var t=e.data;t.forEach((function(e){return B(e.owner,n.onUserFetchSuccess,n.onUserFetchFail)})),n.setState({rooms:t})},n.onUserFetchFail=function(e){var t=e.response;console.log("User fetch fail: ",t)},n.onUserFetchSuccess=function(e){console.log("User fetch success",e);var t=e.data,n=Object(d.a)({},t.userId,t);console.log("user map: ",n)},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e,t;e=this.onRoomFetchSuccess,t=this.onRoomFetchFail,x.get("/api/rooms").then(e,t)}},{key:"render",value:function(){return o.a.createElement(it,{rooms:this.state.rooms})}}]),t}(o.a.Component),lt=n(397),ut=function(e){return o.a.createElement("div",null,"Hi! I am a room Name: ",e.room.name,"Created: ",e.room.createdAt)},mt=function(e){var t=e.msg||"You do not have the permissions required to view this page";return o.a.createElement("div",{className:"error"},t,o.a.createElement(C.b,{to:"/"},o.a.createElement(S.a,null,"Home")))},dt=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={room:null,error:null},n.onRoomFetchSuccess=function(e){n.setState({room:e.data,error:null})},n.onRoomFetchFail=function(e){var t=e.response;console.log("Room fetch failed: ",t),n.setState({error:t})},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){!function(e,t,n){x.get("/api/rooms/".concat(e)).then(t,n)}(this.props.match.params.id,this.onRoomFetchSuccess,this.onRoomFetchFail)}},{key:"renderError",value:function(){var e=this.state.error.status;return 403===e?o.a.createElement(mt,{msg:"User not allowed"}):404===e?o.a.createElement(Xe,null):o.a.createElement("div",null,"Unexpected Error")}},{key:"render",value:function(){var e=this.state,t=e.room,n=e.error;return t?o.a.createElement(ut,{room:t}):n?this.renderError():o.a.createElement("div",{className:"centered-content"},o.a.createElement("h2",null,"Please wait while your Room is loading..."),o.a.createElement(lt.a,{animation:"border",size:"xl"}))}}]),t}(o.a.Component),pt=(n(376),function(e){return o.a.createElement(C.a,null,o.a.createElement($,null,e.serverConnectionFailed?o.a.createElement(Ye,null):o.a.createElement(j.d,null,o.a.createElement(j.b,{exact:!0,path:"/",component:qe}),o.a.createElement(j.b,{exact:!0,path:"/rooms/:id",component:dt}),o.a.createElement(j.b,{exact:!0,path:"/rooms",component:st}),o.a.createElement(j.b,{exact:!0,path:"/login",component:$e}),o.a.createElement(j.b,{exact:!0,path:"/register",component:ot}),o.a.createElement(j.b,{exact:!0,path:"*",component:Xe}))))}),ft=function(e,t){var n,a;n=function(n){var a=e.data,o=n.data.isLoggedIn;t(function(e,t){return{type:"UPDATE_USER",payload:{isLoggedIn:e,user:t}}}(o,a))},a=function(e){var t=e.response;return console.log("Check user status fail: ",t)},x.get("/api/user/status/login").then(n,a)},ht=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(o)))).state={serverConnectionFailed:!1},n.onServerConnectionFailed=function(){n.setState({serverConnectionFailed:!0})},n.onServerConnected=function(){n.setState({serverConnectionFailed:!1})},n.onServerDisconnected=function(){n.setState({serverConnectionFailed:!0})},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.connectToServer(this.onServerConnectionFailed),e=this.onServerDisconnected,Ve.on("disconnect",e),function(e){Ve.on("connect",e)}(this.onServerConnected),this.props.updateUser()}},{key:"render",value:function(){return o.a.createElement(pt,this.state)}}]),t}(o.a.Component),gt=Object(s.b)(null,{connectToServer:function(e){return function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(De(e));case 2:t({type:"CONNECT_TO_SERVER",payload:{connected:!0}});case 3:case"end":return n.stop()}}))}},createNotification:function(e,t,n){var a={type:"CREATE_NOTIFICATION",payload:{id:"id",title:e,content:t,actions:n}};return console.log("action: "),console.log(a),a},updateUser:function(){return function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t){return ft(t,e)},a=function(e){var t=e.response;return console.log("Get current user fail: ",t)},x.get("/api/user/").then(n,a);case 1:case"end":return t.stop()}var n,a}))}}})(ht),Et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,bt=Object(i.e)(E,Et(Object(i.a)(l.a)));c.a.render(o.a.createElement(s.a,{store:bt},o.a.createElement(gt,null)),document.querySelector("#root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.d2044611.chunk.js.map