{"version":3,"sources":["helpers/logger.js","reducers/serverReducer.js","reducers/notificationReducer.js","reducers/userReducer.js","reducers/modalReducer.js","reducers/index.js","constants/actionConstants.js","reducers/roomReducer.js","components/Dropdown/index.js","server-communication/httpServer.js","containers/UserDropdownInfo/index.js","actions/logoutUser.js","components/NotificationContainer/NotificationIcon/index.js","components/NotificationContainer/NotificationListItem/index.js","components/NotificationContainer/index.js","components/Header/index.js","components/Layout/index.js","actions/showModal.js","actions/hideModal.js","components/LandingPage/index.js","components/errors/ServerConnectionFailed/index.js","components/errors/PageNotFound/index.js","components/ToggleablePasswordField/index.js","components/forms/LoginForm/index.js","components/forms/LoginForm/validate.js","components/Alerts/DismissibleAlert.js","containers/LoginContainer/index.js","actions/loginUser.js","constants/serverEventConstants.js","server-communication/socketServer.js","components/forms/RegistrationForm/RegistrationForm.js","components/forms/RegistrationForm/asyncValidate.js","components/forms/RegistrationForm/validate.js","containers/RegisterContainer/index.js","actions/registerUser.js","helpers/convertISODateToReadableString.js","components/RoomListItem/index.js","components/ButtonWithLeadingIcon/index.js","containers/RoomListItemContainer/RoomListItemActionsContainer/index.js","containers/RoomListItemContainer/index.js","components/RoomList/index.js","containers/RoomListContainer/index.js","actions/fetchPublicRooms.js","components/TextInputWordWrap/index.js","components/forms/ChatMessageForm/index.js","components/Message/index.js","containers/MessageContainer/index.js","containers/ChatWindowContainer/colors.js","containers/ChatWindowContainer/index.js","components/RoomInfoHeader/index.js","components/Room/index.js","components/errors/Forbidden/index.js","helpers/sendMessage.js","containers/RoomContainer/index.js","containers/RoomAndRoomListWrapperContainer/index.js","components/App/index.js","actions/updateUser.js","containers/AppContainer/index.js","actions/connectToServer.js","actions/createNotification.js","components/modals/GenericModal.js","actions/createRoom.js","components/forms/CreateRoomForm/index.js","components/forms/CreateRoomForm/validate.js","components/modals/CreateRoomModal.js","actions/tryJoiningRoom.js","components/modals/JoinRoomModal.js","components/forms/DeleteRoomForm/index.js","components/modals/DeleteRoomModal.js","actions/deleteRoom.js","containers/ModalContainer/index.js","index.js"],"names":["Logger","loggerKey","this","args","console","log","module","exports","INITIAL_STATE","connected","length","data","isLoggedIn","user","isModalOpen","modalName","modalProps","combineReducers","state","action","type","payload","serverConnection","rooms","_","omit","notifications","id","metadata","form","formReducer","modal","props","OverlayTrigger","trigger","placement","rootClose","overlay","Popover","Title","as","title","Content","menu","triggerComponent","axios","Axios","create","withCredentials","registerUser","username","password","confirmPassword","onRequestFulfilled","onRequestRejected","post","then","loginUser","getRoom","roomId","get","createRoom","roomName","roomType","deleteRoom","delete","joinRoom","UserDropdownInfo","onLogoutButtonClick","logoutUser","renderTriggerComponent","NavItem","className","icon","faUser","size","renderTitle","style","fontWeight","renderMenu","Button","variant","onClick","Dropdown","React","Component","connect","dispatch","a","async","response","visibility","shouldShowBadge","faBell","faIdBadge","CustomItem","forwardRef","ref","children","NotificationListItem","notification","DropdownItem","NotificationContainer","Object","keys","map","key","NotificationIcon","getDropdownMenu","getWrappedNotificationIcon","backgroundColor","isUserLoggedIn","Navbar","collapseOnSelect","expand","sticky","Container","Brand","to","Nav","Layout","showModal","hideModal","ServerConnectionFailed","PageNotFound","ToggleablePasswordField","formProps","error","useState","passwordVisible","setPasswordVisibility","FormLabel","label","InputGroup","FormControl","input","Append","cursor","Text","faEye","faEyeSlash","display","Feedback","renderField","meta","formControlProps","touched","pristine","hasErrors","isInvalid","isValid","getFormControlProps","Form","Label","reduxForm","validate","value","errors","onSubmit","handleSubmit","onFormSubmit","FormGroup","controlId","Field","component","name","placeholder","shouldShowDismissIcon","dismissAction","Alert","show","onClose","onDismiss","dismissible","Heading","heading","body","LoginContainer","hasLoginError","errorReason","showErrorAlert","onLoginFailure","setState","reason","formValues","renderAppropriateContentIfRedirect","locationState","location","isRedirectFromSuccessfulRegister","DismissibleAlert","onFailureCallback","socket","openSocket","autoConnect","connectToServer","onConnectionFailed","on","callback","emit","events","asyncValidating","isAsyncValidationError","getPropsForFormControl","values","hasPasswordMismatch","errMsg","asyncValidate","Promise","resolve","reject","status","asyncChangeFields","submitting","invalid","registerButtonDisabled","registerButtonStyle","noValidate","disabled","RegisterContainer","onRegistrationFailed","renderAppropriateRedirect","pathname","isUserRegistered","RegistrationForm","isRegistered","isoDate","argDate","Date","oneDate","otherDate","Error","timeDiffData","differenceInYears","getYear","unit","difference","differenceInMonths","getMonth","differenceInDays","getDate","differenceInHours","getHours","differenceInMinutes","getMinutes","differenceInSeconds","getSeconds","getAppropriateTimeDifferenceData","getAppropriateTimeDifferenceText","RoomListItem","content","footer","ListGroupItem","Card","Body","Footer","ButtonWithLeadingIcon","buttonProps","Row","Col","paddingLeft","whiteSpace","RoomListItemActionsContainer","joinRoomStatus","onJoinButtonClick","room","onError","message","onDeleteButtonClick","Spinner","animation","faCheckCircle","faTimesCircle","roomMember","adminActions","ButtonGroup","memberType","isRoomAdmin","determineJoinButtonMetadata","currentUser","currentUserRoomMemberReference","queryUserId","members","filter","_id","getMemberRefInRoom","getActionsForRoomMember","getActionsForNonRoomMember","RoomListItemContainer","roomOwner","createdBy","roomCreatedBy","roomCreatedAt","convertISODateToReadableString","createdAt","renderRoomMetaData","color","renderComponentTitle","renderComponentContent","renderComponentFooter","RoomList","ListGroup","renderRoomList","logger","require","RoomListContainer","onRoomFetchFail","debug","fetchPublicRooms","onFailure","TextInputWordWrap","autosize","textareaRef","rows","el","FORM_ID","renderMessageField","onSubmitSuccess","reset","sm","md","ld","Group","lg","Message","align","isCurrentUserMessageAuthor","messageAuthor","author","messageArrow","borderAttr","borderRight","borderLeft","renderMessageArrow","Item","border","MessageContainer","userId","messageAlignment","colors","colorChoicesExhausted","usedColors","isColorUsed","randomColor","indexOf","assignRandomly","assignedKeys","forEach","randomIndex","Math","floor","random","getRandomColor","push","ChatWindowContainer","randomAuthorColors","assignRandomColorsToMessageAuthors","messageAuthors","messages","assignRandomColors","messageAuthorColor","RoomInfoHeader","fluid","height","xl","faSignOutAlt","faPlus","Room","onSendMessageButtonClick","marginTop","Forbidden","msg","onSuccess","addMessageToRoom","messageId","sendMessage","RoomContainer","onRoomFetchSuccess","trim","onSendMessageSuccess","onSendMessageFailure","subEvent","registerNewMessageListener","err","renderError","styles","row","marginLeft","marginRight","container","RoomAndRoomListWrapperContainer","match","params","xs","roomListColProps","maxHeight","overflow","renderRoomListCol","roomColProps","renderRoomCol","App","serverConnectionFailed","exact","path","LandingPage","onGetCurrentUserSuccess","userResponse","loginResponse","actionUpdateUser","AppContainer","onServerConnectionFailed","onServerConnected","onServerDisconnected","updateUser","createNotification","actions","GenericModal","Modal","visible","onHide","centered","Header","closeButton","header","attemptCreatingRoom","radioOptions","renderRadioGroup","options","impureFormNoErrors","radioInputs","option","Check","renderRoomNameField","Control","required","CreateRoomModal","alert","showAlert","hideAlert","onCancelButtonClick","getAlertDismissAction","getModalActions","getModalContent","isModalVisible","tryJoiningRoom","onPermissionPending","onPermissionRequestCompleted","JoinRoomModal","inputValue","isFormLoading","event","preventDefault","onJoinRoomPermissionRecieved","inputChanged","e","target","errorMessage","Fragment","loading","onChange","autoFocus","DeleteRoomForm","mustMatchRoomName","undefined","DeleteRoomModal","deleteRoomStatus","onDeleteRoomSuccess","onDeleteRoomFail","getPropsForButtonWithLeadingIcon","deleteRoomForm","syncErrors","getDeleteButtonMeta","buttonWithLeadingIconProps","cancelButtonText","renderDeleteButton","catch","getModalComponentToShow","composeEnhanchers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.a1d443c5.chunk.js","sourcesContent":["class Logger{\n    constructor(loggerKey){\n        this.loggerKey = loggerKey\n    }\n\n    debug(...args){\n        console.log(this.loggerKey, ...args)\n    }\n}\n\nmodule.exports = function (loggerKey){\n    return new Logger(loggerKey)\n}","import { CONNECT_TO_SERVER } from '../constants/actionConstants';\n\nconst INITIAL_STATE = {\n    connected: false\n}\n\nexport default (state = INITIAL_STATE, action) => {\n    if (action.type === CONNECT_TO_SERVER) {\n        return {connected: action.payload.connected}\n    }\n\n    return state;\n}","import { CREATE_NOTIFICATION } from \"../constants/actionConstants\";\n\nconst INITIAL_STATE = { length: 0, data: {} }\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case CREATE_NOTIFICATION:\n            const { id, ...metadata } = action.payload;\n            console.log('id: ' + id + \"\\nmetadata:\");\n            console.log(metadata)\n            return {\n                ...state,\n                length: state.length + 1,\n                data: { ...state.data, [id]: metadata }\n            };\n\n        default:\n            return state;\n    }\n}","import { LOGIN, UPDATE_USER, LOGOUT, REGISTER } from '../constants/actionConstants';\n\nconst INITIAL_STATE = {\n    isLoggedIn: false,\n    user: {}\n}\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case LOGIN:\n            return { isLoggedIn: true, user: action.payload.user }\n        case LOGOUT:\n            return INITIAL_STATE\n        case REGISTER:\n            return { isLoggedIn: false, user: action.payload }\n        case UPDATE_USER:\n            //Update only what is provided in payload\n            return { ...state, ...action.payload }\n        default:\n            return state;\n    }\n}","import { SHOW_MODAL, HIDE_MODAL } from '../constants/actionConstants'\n\nconst INITIAL_STATE = {\n    isModalOpen: false,\n    modalName: null,\n    modalProps: null\n}\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case SHOW_MODAL:\n            return {\n                isModalOpen: true,\n                ...action.payload\n            }\n\n        case HIDE_MODAL:\n            return INITIAL_STATE\n\n        default:\n            return state\n    }\n}","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\n\nimport serverReducer from './serverReducer';\nimport roomReducer from './roomReducer';\nimport notificationReducer from './notificationReducer';\nimport userReducer from './userReducer';\nimport modalReducer from './modalReducer';\n\nexport default combineReducers({\n    user: userReducer,\n    serverConnection: serverReducer,\n    rooms: roomReducer,\n    notifications: notificationReducer,\n    form: formReducer,\n    modal: modalReducer\n})\n","export const CONNECT_TO_SERVER = \"CONNECT_TO_SERVER\";\nexport const RECIEVE_MESSAGE = \"RECIEVE_MESSAGE\";\n\nexport const FETCH_PUBLIC_ROOMS = 'FETCH_PUBLIC_ROOMS'\nexport const CREATE_ROOM = \"CREATE_ROOM\";\nexport const DELETE_ROOM = 'DELETE_ROOM'\nexport const JOIN_ROOM = \"JOIN_ROOM\";\n\nexport const CREATE_NOTIFICATION = \"CREATE_NOTIFICATION\";\n\nexport const UPDATE_USER = \"UPDATE_USER\";\nexport const LOGIN = \"LOGIN\"\nexport const LOGOUT = \"LOGOUT\"\nexport const REGISTER = \"REGISTER\"\n\nexport const SHOW_MODAL = 'SHOW_MODAL'\nexport const HIDE_MODAL = 'HIDE_MODAL'","import _ from 'lodash'\n\nimport { DELETE_ROOM, FETCH_PUBLIC_ROOMS } from '../constants/actionConstants';\n\nexport default (state = [], action) => {\n    switch (action.type) {\n        case FETCH_PUBLIC_ROOMS:\n            return action.payload\n        case DELETE_ROOM:\n            return _.omit(state, action.payload)\n        default:\n            return state;\n    }\n}","import React from 'react';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\n\nexport default (props) => {\n\n    const renderPopover = () => {\n        return (\n            <Popover>\n                <Popover.Title as=\"h2\">{props.title}</Popover.Title>\n                <Popover.Content>\n                    {props.menu}\n                </Popover.Content>\n            </Popover>\n        )\n    }\n\n    return (\n        <OverlayTrigger\n            trigger=\"click\"\n            placement=\"bottom\"\n            rootClose={true}\n            overlay={renderPopover()}\n        >\n            {props.triggerComponent}\n        </OverlayTrigger>\n    )\n}","import Axios from 'axios';\n\nconst axios = Axios.create({ withCredentials: true })\n\nexport const registerUser = (username, password, confirmPassword, onRequestFulfilled, onRequestRejected) => {\n    return axios.post('/api/register', { username, password, confirmPassword }).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const loginUser = (username, password, onRequestFulfilled, onRequestRejected) => {\n    return axios.post('/api/login', { username, password }).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const getUser = (userId, onRequestFulfilled, onRequestRejected) => {\n    return axios.get(`/api/user/${userId}`).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const getCurrentUser = (onRequestFulfilled, onRequestRejected) => {\n    return axios.get('/api/user/').then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const checkLoginStatus = (onRequestFulfilled, onRequestRejected) => {\n    return axios.get('/api/user/status/login').then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const logoutUser = (onRequestFulfilled, onRequestRejected) => {\n    return axios.post('/api/logout').then(onRequestFulfilled, onRequestRejected);\n}\n\nexport const getRoom = (roomId, onRequestFulfilled, onRequestRejected) => {\n    return axios.get(`/api/rooms/${roomId}`).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const getAllRooms = (onRequestFulfilled, onRequestRejected) => {\n    return axios.get('/api/rooms').then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const createRoom = (roomName, roomType, onRequestFulfilled, onRequestRejected) => {\n    return axios.post('/api/rooms', { roomName, roomType }).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const updateRoom = (roomId, update, onRequestFulfilled, onRequestRejected) => {\n    return axios.patch(`/api/rooms/${roomId}`, update).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const deleteRoom = (roomId, onRequestFulfilled, onRequestRejected) => {\n    return axios.delete(`/api/rooms/${roomId}`).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const joinRoom = (roomId, onRequestFulfilled, onRequestRejected) => {\n    return axios.post(`/api/rooms/${roomId}/members`).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const getRoomMessage = (roomId, messageId, onRequestFulfilled, onRequestRejected) => {\n    return axios.get(`/api/rooms/${roomId}/messages/${messageId}`).then(onRequestFulfilled, onRequestRejected)\n}\n\nexport const addMessageToRoom = (roomId, message, onRequestFulfilled, onRequestRejected) => {\n    return axios.post(`/api/rooms/${roomId}/messages`, { message }).then(onRequestFulfilled, onRequestRejected)\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport NavItem from 'react-bootstrap/NavItem';\nimport Button from 'react-bootstrap/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\n\nimport Dropdown from '../../components/Dropdown';\nimport logoutUser from '../../actions/logoutUser';\nimport './UserDropdownInfo.scss';\n\nclass UserDropdownInfo extends React.Component {\n\n    onLogoutButtonClick = () => {\n        this.props.logoutUser();\n    }\n\n    renderTriggerComponent = () => {\n        return (\n            <NavItem as={\"span\"} className=\"header-icon\" >\n                <FontAwesomeIcon icon={faUser} size=\"lg\" />\n            </NavItem>\n        )\n    }\n\n    renderTitle = () => {\n        return (\n            <span style={{ fontWeight: \"normal\" }}>\n                Signed in as <strong>{this.props.username}</strong>\n            </span>\n        )\n    }\n\n    renderMenu = () => {\n        return (\n            <div className=\"user-info-dropdown-menu-container\">\n                <Button variant=\"outline-secondary\" onClick={this.onLogoutButtonClick}>Log Out</Button>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <Dropdown\n                title={this.renderTitle()}\n                menu={this.renderMenu()}\n                triggerComponent={this.renderTriggerComponent()}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { username: state.user.user.username }\n}\n\nexport default connect(mapStateToProps, { logoutUser })(UserDropdownInfo);","import { LOGOUT } from '../constants/actionConstants';\n\nimport { logoutUser } from '../server-communication/httpServer'\n\nexport default () => async dispatch => {\n    logoutUser(() => dispatch({ type: LOGOUT }),({ response }) => console.log('Logout Failed: ', response));\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBell, faIdBadge } from '@fortawesome/free-solid-svg-icons';\n\nexport default (props) => {\n    const visibility = props.shouldShowBadge ? \"visible\" : \"hidden\";\n    return (\n        <FontAwesomeIcon icon={faBell} size=\"lg\">\n            <FontAwesomeIcon icon={faIdBadge} style={{ visibility: visibility }} />\n        </FontAwesomeIcon>\n    );\n}","import React from 'react';\nimport DropdownItem from 'react-bootstrap/DropdownItem';\n\nconst CustomItem = React.forwardRef(({ children, className, style }, ref) => (\n    <div\n        ref={ref}\n        className={className}\n        style={style}\n    >\n        {children}\n    </div>\n))\n\nconst NotificationListItem = (props) => {\n    console.log(\"item. title: \" + props.notification.title)\n    return (\n        <DropdownItem as={CustomItem}>\n            nblah abl blhjljaljgjjkfgklkjkgjkfgjfkgj\n        </DropdownItem>\n    );\n}\n\nexport default NotificationListItem;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport NotificationIcon from './NotificationIcon';\nimport NotificationListItem from './NotificationListItem';\nimport Dropdown from '../Dropdown';\n\nimport './NotificationContainer.scss'\n\nclass NotificationContainer extends React.Component {\n    getDropdownMenu() {\n        const { notifications } = this.props;\n        if (notifications.length === 0) {\n            return <div className=\"item\">You don't have any notifications</div>\n        }\n\n        return (\n            Object.keys(notifications.data).map(id => {\n                return (\n                    <div key={id}>\n                        <NotificationListItem\n                            notification={notifications.data[id]}\n                        />\n                        <hr />\n                    </div>\n                );\n            })\n        );\n    }\n\n    getWrappedNotificationIcon() {\n        return (\n            <span className=\"header-icon nav-item\">\n                <NotificationIcon shouldShowBadge={this.props.notifications.length !== 0} />\n            </span>\n        );\n    }\n\n    render() {\n        return (\n            <Dropdown\n                title=\"Notifications\"\n                menu={this.getDropdownMenu()}\n                triggerComponent={this.getWrappedNotificationIcon()}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { notifications: state.notifications }\n}\n\nexport default connect(mapStateToProps, null)(NotificationContainer);\n\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport NavItem from 'react-bootstrap/NavItem';\nimport Container from 'react-bootstrap/Container';\nimport UserDropdownInfo from '../../containers/UserDropdownInfo'\nimport NotificationContainer from '../NotificationContainer';\nimport './Header.scss';\n\nconst style = { backgroundColor: \"#23282d\" }\n\nconst renderConditionallyLoggedInStatus = (isUserLoggedIn) => {\n    if (isUserLoggedIn) {\n        return (\n            <UserDropdownInfo />\n        );\n    }\n    else {\n        return (\n            <>\n                <Link to=\"/login\">\n                    <NavItem as={\"span\"} className=\"header-icon\" >\n                        <Button size=\"sm\">Login</Button>\n                    </NavItem>\n                </Link>\n\n                <Link to=\"/register\">\n                    <NavItem as={\"span\"} className=\"header-icon\" >\n                        <Button size=\"sm\">Register</Button>\n                    </NavItem>\n                </Link>\n            </>\n        );\n    }\n}\n\nconst Header = (props) => {\n    return (\n        <Navbar collapseOnSelect style={style} expand=\"large\" sticky=\"top\">\n            <Container>\n                <Navbar.Brand>\n                    <Link to=\"/\" className=\"logo\"> ChatRooms </Link>\n                </Navbar.Brand>\n\n                <Nav className=\"justify-content-end flex-row\">\n                    <div className=\"header-item-container\">\n                        <Link to=\"/rooms\" className=\"header-text\">Rooms</Link>\n                    </div>\n                    <div className=\"header-item-container\">\n                        <NotificationContainer />\n                    </div>\n                    {renderConditionallyLoggedInStatus(props.isUserLoggedIn)}\n                </Nav>\n            </Container>\n        </Navbar>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return { isUserLoggedIn: state.user.isLoggedIn }\n}\n\nexport default connect(mapStateToProps, null)(Header);\n\n/*\nLogo credits\n\n<div>\n    Icons made by\n    <a href=\"https://www.flaticon.com/authors/smashicons\" title=\"Smashicons\">\n        Smashicons\n    </a>\n    from\n    <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">\n        www.flaticon.com\n    </a>\n</div>\n*/","import React from 'react';\nimport Header from '../Header';\n\nconst Layout = (props) => {\n    return (\n        <div className=\"app\">\n            <Header />\n            <div>\n                {props.children}\n            </div>\n        </div>\n    )\n}\n\nexport default Layout;\n","import { SHOW_MODAL } from '../constants/actionConstants'\n\nexport default (modalName, modalProps) => {\n    return {\n        type: SHOW_MODAL,\n        payload: { modalName, modalProps }\n    }\n}","import { HIDE_MODAL } from '../constants/actionConstants'\n\nexport default _ => {\n    return { type: HIDE_MODAL }\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport Button from 'react-bootstrap/Button';\n\nimport './LandingPage.scss';\nimport showModal from '../../actions/showModal'\nimport hideModal from '../../actions/hideModal'\n\nconst LandingPage = (props) => {\n    return (\n        <div className=\"landing-page compensate-header\">\n            <div className=\"inner-wrapper\">\n                <p>Welcome to ChatRooms!</p>\n\n                <div className=\"buttons-container\">\n                    <Button onClick={() => props.showModal('CreateRoom')}>\n                        Create Room\n                    </Button>\n\n                    <Button onClick={() => props.showModal('JoinRoom')}>\n                        Join Room\n                    </Button>\n                </div>\n\n            </div>\n        </div>\n    );\n}\n\nexport default connect(null, { showModal, hideModal })(LandingPage);\n","import React from 'react';\n\nimport '../style.scss'\n\nconst ServerConnectionFailed = () => {\n    return (\n        <div className=\"error\">\n            Oops! Unable to connect to the server. Please visit later\n        </div>\n    );\n}\n\nexport default ServerConnectionFailed;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button';\n\nimport '../style.scss'\n\nconst PageNotFound = () => {\n    return (\n        <div className=\"error\">\n            Error 404: Page Not Found.\n            <Link to=\"/\">\n                <Button>Home</Button>\n            </Link>\n        </div>\n    );\n}\n\nexport default PageNotFound;\n","import React, { useState } from 'react';\nimport { InputGroup, FormControl, FormLabel } from 'react-bootstrap'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons';\n\nconst ToggleablePasswordField = ({ formProps, error }) => {\n    const [passwordVisible, setPasswordVisibility] = useState(false)\n\n    const togglePasswordVisibility = () => {\n        setPasswordVisibility(!passwordVisible)\n    }\n\n    const renderDummyFormControlForFeedback = () => {\n        return (\n            <FormControl\n                {...formProps}\n                {...formProps.input}\n                style={{display: 'none'}}\n            />\n        )\n    }\n\n    return (\n        <>\n            <FormLabel>{formProps.label}</FormLabel>\n            <InputGroup>\n                <FormControl\n                    {...formProps}\n                    {...formProps.input}\n                    type={passwordVisible ? 'text' : 'password'}\n                />\n                <InputGroup.Append onClick={togglePasswordVisibility} style={{ cursor: 'pointer' }}>\n                    <InputGroup.Text>\n                        <FontAwesomeIcon icon={passwordVisible ? faEye : faEyeSlash} />\n                    </InputGroup.Text>\n                </InputGroup.Append>\n            </InputGroup>\n            {renderDummyFormControlForFeedback()}\n            <FormControl.Feedback type=\"invalid\">{error}</FormControl.Feedback>\n        </>\n    )\n}\n\nexport default ToggleablePasswordField;\n","import React from 'react'\nimport { Button, Form, FormControl, FormGroup } from 'react-bootstrap'\nimport { Field, reduxForm } from 'redux-form'\n\nimport ToggleablePasswordField from '../../ToggleablePasswordField'\nimport validate from './validate'\n\nconst getFormControlProps = (formProps) => {\n    const { touched, error, pristine } = formProps.meta\n    const hasErrors = touched && error\n\n    return {\n        ...formProps,\n        ...formProps.input,\n        isInvalid: hasErrors,\n        isValid: !pristine && !hasErrors\n    }\n}\n\nconst renderField = (formProps) => {\n    const { error } = formProps.meta\n    const formControlProps = getFormControlProps(formProps)\n\n    if (formProps.type === 'password') {\n        return <ToggleablePasswordField formProps={formControlProps} error={error} />\n    }\n\n    return (\n        <>\n            <Form.Label>{formProps.label}</Form.Label>\n            <FormControl {...formControlProps} />\n            <FormControl.Feedback type='invalid'>{error}</FormControl.Feedback>\n        </>\n    );\n}\n\nconst LoginForm = (props) => {\n    return (\n        <Form onSubmit={props.handleSubmit(props.onFormSubmit)}>\n            <FormGroup controlId=\"formUsernameGroup\">\n                <Field\n                    component={renderField}\n                    name=\"username\"\n                    type=\"text\"\n                    label=\"Enter Username\"\n                    placeholder=\"Example: mitsy_the_cat\"\n                />\n            </FormGroup>\n\n            <FormGroup controlId=\"formPasswordGroup\">\n                <Field\n                    component={renderField}\n                    name=\"password\"\n                    type=\"password\"\n                    label=\"Enter Password\"\n                    placeholder=\"Password\"\n                />\n            </FormGroup>\n\n            <Button type=\"submit\">Login</Button>\n        </Form>\n    );\n}\n\nexport default reduxForm({\n    form: 'loginForm',\n    validate\n})(LoginForm)","export default (value) => {\n    const errors = {}\n    if(!value.username){\n        errors.username = 'Username is required'\n    }\n    if(!value.password){\n        errors.password = 'Password is required'\n    }\n\n    return errors\n}","import React from 'react'\nimport Alert from 'react-bootstrap/Alert'\n\nexport default (props) => {\n    const shouldShowDismissIcon = !props.dismissAction;\n    return (\n        <Alert show={props.show} variant={props.variant} onClose={props.onDismiss} dismissible={shouldShowDismissIcon}>\n            <Alert.Heading>{props.heading}</Alert.Heading>\n            <p>{props.body}</p>\n            <div className='d-flex justify-content-end'>\n                {props.dismissAction && props.dismissAction()}\n            </div>\n        </Alert>\n    )\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { Alert, Container } from 'react-bootstrap';\n\n\nimport LoginForm from '../../components/forms/LoginForm/'\nimport loginUser from '../../actions/loginUser';\nimport DismissibleAlert from '../../components/Alerts/DismissibleAlert'\n\nimport './style.scss'\n\nclass LoginContainer extends React.Component {\n    state = {\n        hasLoginError: false,\n        errorReason: null,\n        showErrorAlert: false,\n    }\n\n    onLoginFailure = ({ response }) => {\n        this.setState({\n            hasLoginError: true,\n            errorReason: response.data.reason,\n            showErrorAlert: true\n        })\n    }\n\n    onFormSubmit = (formValues) => {\n        this.props.loginUser(\n            formValues.username,\n            formValues.password,\n            this.onLoginFailure\n        );\n    }\n\n    renderAppropriateContentIfRedirect = (props) => {\n        const locationState = props.location.state;\n        if (locationState && locationState.isRedirectFromSuccessfulRegister) {\n            return (\n                <Alert variant=\"success\">\n                    <Alert.Heading>Registration Completed!</Alert.Heading>\n                    <p>Please login to continue</p>\n                </Alert>\n            )\n        }\n    }\n\n    render() {\n        if (this.props.isUserLoggedIn) {\n            return <Redirect to=\"/\" />\n        }\n        else {\n            return (\n                <Container className=\"compensate-header\">\n                    <div className=\"centered-content login-container\">\n                        {this.renderAppropriateContentIfRedirect(this.props)}\n                        <DismissibleAlert\n                            variant=\"danger\"\n                            heading=\"Login Unsuccessful\"\n                            body={this.state.errorReason}\n                            show={this.state.showErrorAlert}\n                            onDismiss={() => this.setState({ showErrorAlert: false })}\n                        />\n                        <LoginForm onFormSubmit={this.onFormSubmit} />\n                    </div>\n                </Container>\n            );\n        }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isUserLoggedIn: state.user.isLoggedIn,\n    }\n}\n\nexport default connect(mapStateToProps, { loginUser })(LoginContainer);\n","import { loginUser } from '../server-communication/httpServer'\n\nimport { LOGIN } from '../constants/actionConstants'\n\nconst loginAction = (user) => {\n    return {\n        type: LOGIN,\n        payload: {\n            user: user\n        }\n    }\n}\n\nexport default (username, password, onFailureCallback) => async (dispatch) => {\n    const dispatchLoginAction = (response) => {\n        dispatch(loginAction(response.data))\n    }\n\n    loginUser(username, password, dispatchLoginAction, onFailureCallback);\n}\n","export default {\n    ROOM_EVENT: 'event:room',\n    ROOM_JOIN_PERMISSION_SEND: 'room_join_permission_send',\n    ROOM_JOIN_PERMISSION_RECIEVE: 'room_join_permission_recieve',\n    CONNECT_TO_ROOM: 'connect_to_room',\n    JOIN_ROOM: 'join_room',\n    NEW_USER_IN_ROOM: 'new_user_in_room',\n\n    MESSAGE_EVENT: 'event:message',\n    NEW_MESSAGE: 'send_message',\n\n    USER_EVENT: 'event:user',\n    CHECK_USERNAME: 'check_username'\n}","import openSocket from 'socket.io-client';\nimport events from '../constants/serverEventConstants';\n\nconst socket = openSocket('/', { autoConnect: false });\n\nexport const connectToServer = (onConnectionFailed) => {\n    socket.connect();\n    socket.on('connect_error', onConnectionFailed);\n}\n\nexport const onServerConnected = (callback) => {\n    socket.on('connect', callback)\n}\n\nexport const onServerDisconnected = (callback) => {\n    socket.on('disconnect', callback)\n}\n\nexport const registerNewMessageListener = (roomId, callback) => {\n    socket.on(events.MESSAGE_EVENT, (...args) => {\n        console.log(\"Message Event: \", args)\n        const subEvent = args[0]\n        if (subEvent === events.NEW_MESSAGE) {\n            const data = args[1]\n            if (data.roomId === roomId) {\n                callback(data)\n            }\n        }\n    })\n}\n\nexport const joinRoom = (roomId, callback) => {\n    return socket.emit(events.ROOM_EVENT, events.JOIN_ROOM, roomId, callback);\n}\n\nexport const connectToRoom = (roomId, callback) => {\n    return socket.emit(events.ROOM_EVENT, events.CONNECT_TO_ROOM, roomId, callback)\n}\n\nexport const checkUsername = (username, callback) => {\n    return socket.emit(events.USER_EVENT, events.CHECK_USERNAME, username, callback)\n}\n\nexport const sendMessage = (roomId, messageId) => {\n    return socket.emit(events.MESSAGE_EVENT, events.NEW_MESSAGE, roomId, messageId)\n}","import React from 'react';\nimport { Button, Form, FormControl, FormGroup } from 'react-bootstrap';\nimport { Field, reduxForm } from 'redux-form';\n\nimport validate from './validate';\nimport { checkUsernameExists, USERNAME_TAKEN_ERROR_MESSAGE } from './asyncValidate';\nimport './style.scss';\nimport ToggleablePasswordField from '../../ToggleablePasswordField';\n\nconst getPropsForFormControl = (formProps) => {\n    const { touched, error, pristine, asyncValidating } = formProps.meta\n    const hasErrors = isAsyncValidationError(error) || (touched && error)\n\n    return {\n        ...formProps,\n        ...formProps.input,\n        className: asyncValidating ? 'loading' : '',\n        isInvalid: hasErrors,\n        isValid: !asyncValidating && !pristine && !hasErrors\n    }\n}\n\nconst renderField = (formProps) => {\n    const { error } = formProps.meta\n    const formControlProps = getPropsForFormControl(formProps)\n\n    if (formProps.type === 'password') {\n        return <ToggleablePasswordField formProps={formControlProps} error={error} />\n    }\n\n    return (\n        <>\n            <Form.Label>{formProps.label}</Form.Label>\n            <FormControl {...formControlProps} />\n            <FormControl.Feedback type=\"invalid\">{error}</FormControl.Feedback>\n        </>\n    );\n}\n\nconst isAsyncValidationError = (error) => {\n    return error === USERNAME_TAKEN_ERROR_MESSAGE\n}\n\nconst RegisterForm = (props) => {\n    const { pristine, submitting, asyncValidating, invalid } = props;\n    const registerButtonDisabled = (pristine || submitting || asyncValidating || invalid);\n\n    const registerButtonStyle = {\n        cursor: registerButtonDisabled ? \"not-allowed\" : \"pointer\"\n    }\n\n    return (\n        <Form id=\"registration-form\" noValidate onSubmit={props.handleSubmit(props.onFormSubmit)}>\n            <FormGroup controlId=\"formUsernameGroup\">\n                <Field\n                    component={renderField}\n                    name=\"username\"\n                    type=\"text\"\n                    label=\"Enter Username\"\n                    placeholder=\"Example: mitsy_the_cat\"\n                />\n            </FormGroup>\n            <FormGroup controlId=\"formPasswordGroup\">\n                <Field\n                    component={renderField}\n                    name=\"password\"\n                    type=\"password\"\n                    label=\"Enter Password\"\n                    placeholder=\"Password\"\n                />\n            </FormGroup>\n\n            <FormGroup controlId=\"formConfirmPasswordGroup\">\n                <Field\n                    component={renderField}\n                    name=\"confirmPassword\"\n                    type=\"password\"\n                    label=\"Confirm Password\"\n                    placeholder=\"Confirm Password\"\n                />\n            </FormGroup>\n\n            <Button\n                type=\"submit\"\n                form=\"registration-form\"\n                disabled={registerButtonDisabled}\n                style={registerButtonStyle}\n            >\n                Register\n            </Button>\n        </Form >\n    );\n}\n\nexport default reduxForm({\n    form: 'registerForm',\n    validate: validate,\n    asyncValidate: checkUsernameExists,\n    asyncChangeFields: ['username']\n})(RegisterForm)","import { checkUsername } from '../../../server-communication/socketServer'\n\nexport const USERNAME_TAKEN_ERROR_MESSAGE = 'That username is already taken'\n\nexport const checkUsernameExists = (values, _) => {\n    return new Promise((resolve, reject) =>\n        checkUsername(values.username, (response) => {\n            if (response.status === 200) {\n                reject({ 'username': USERNAME_TAKEN_ERROR_MESSAGE })\n            }\n            else {\n                resolve()\n            }\n        })\n    )\n}","const hasPasswordMismatch = (password, confirmPassword) => {\n    return password !== confirmPassword\n}\n\nexport default (values) => {\n    const { username, password, confirmPassword } = values;\n    const errors = {}\n\n    if (!username) {\n        errors.username = \"Username cannot be empty\"\n    }\n    if (!password) {\n        errors.password = \"Password cannot be empty\"\n    }\n    if (!confirmPassword) {\n        errors.confirmPassword = \"Confirm Password cannot be empty\"\n    } else if (hasPasswordMismatch(password, confirmPassword)) {\n        const errMsg = \"Confirm Password and Password must match\"\n        errors.confirmPassword = errMsg\n        errors.password = errMsg\n    }\n\n    return errors\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport Container from 'react-bootstrap/Container';\n\nimport RegistrationForm from '../../components/forms/RegistrationForm/RegistrationForm';\nimport registerUser from '../../actions/registerUser';\nimport { Redirect } from 'react-router-dom';\n\nclass RegisterContainer extends React.Component {\n\n    onRegistrationFailed = ({ response }) => {\n        console.log(\"Registration failed: \", response)\n    }\n\n    onFormSubmit = (formValues) => {\n        console.log(\"Registration Form Values: \", formValues)\n        this.props.registerUser(\n            formValues.username,\n            formValues.password,\n            formValues.confirmPassword,\n            this.onRegistrationFailed\n        )\n    }\n\n    renderAppropriateRedirect = (isUserLoggedIn) => {\n        if (isUserLoggedIn) {\n            return <Redirect to=\"/\" />\n        }\n\n        return <Redirect to={{\n            pathname: \"/login\",\n            state: { isRedirectFromSuccessfulRegister: true }\n        }} />\n    }\n\n    render() {\n        if (this.props.isUserLoggedIn) {\n            return <Redirect to=\"/\" />\n        }\n\n        if (this.props.isUserRegistered) {\n            return this.renderAppropriateRedirect(this.props.isUserLoggedIn)\n        }\n\n        return (\n            <div className=\"centered-content\">\n                <Container>\n                    <RegistrationForm onFormSubmit={this.onFormSubmit} />\n                </Container>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isUserRegistered: state.user.user && state.user.user.isRegistered,\n        isUserLoggedIn: state.user.isLoggedIn\n    }\n}\n\nexport default connect(mapStateToProps, { registerUser })(RegisterContainer);\n","import { REGISTER } from '../constants/actionConstants';\nimport { registerUser } from '../server-communication/httpServer'\n\n\nexport default (username, password, confirmPassword, onRequestRejected) => async (dispatch) => {\n    registerUser(username, password, confirmPassword,\n        (response) => dispatch({ type: REGISTER, payload: response.data }),\n        onRequestRejected\n    )\n}\n","const getAppropriateTimeDifferenceData = (oneDate, otherDate) => {\n    const differenceInYears = oneDate.getYear() - otherDate.getYear()\n    if (differenceInYears > 0) {\n        let unit = differenceInYears > 1 ? 'years' : 'year'\n        return { unit, difference: differenceInYears }\n    }\n\n    const differenceInMonths = oneDate.getMonth() - otherDate.getMonth()\n    if (differenceInMonths > 0) {\n        let unit = differenceInMonths > 1 ? 'months' : 'month'\n        return { unit, difference: differenceInMonths }\n    }\n\n    const differenceInDays = oneDate.getDate() - otherDate.getDate()\n    if (differenceInDays > 0) {\n        let unit = differenceInDays > 1 ? 'days' : 'day'\n        return { unit, difference: differenceInDays }\n    }\n\n    const differenceInHours = oneDate.getHours() - otherDate.getHours()\n    if (differenceInHours > 0) {\n        let unit = differenceInHours > 1 ? 'hrs' : 'hr'\n        return { unit, difference: differenceInHours }\n    }\n\n    const differenceInMinutes = oneDate.getMinutes() - otherDate.getMinutes()\n    if (differenceInMinutes > 0) {\n        let unit = differenceInMinutes > 1 ? 'mins' : 'min'\n        return { unit, difference: differenceInMinutes }\n    }\n\n    const differenceInSeconds = oneDate.getSeconds() - otherDate.getSeconds()\n    if (differenceInSeconds > 0) {\n        let unit = differenceInSeconds > 1 ? 'secs' : 'sec'\n        return { unit, difference: differenceInSeconds }\n    }\n}\n\nconst getAppropriateTimeDifferenceText = (oneDate, otherDate) => {\n    if (oneDate < otherDate) {\n        const errMsg = '[ISODateToReadableString.getAppropriateTimeDifferenceText] First date argument must be greater than the second argument'\n        throw new Error(errMsg)\n    }\n\n    const timeDiffData = getAppropriateTimeDifferenceData(oneDate, otherDate)\n    if (!timeDiffData) {\n        return 'just now'\n    }\n\n    return `${timeDiffData.difference}${timeDiffData.unit} ago`\n}\n\nexport default (isoDate) => {\n    if (!isoDate) {\n        return '<unknown>'\n    }\n\n    const argDate = new Date(isoDate)\n    const todayDate = new Date()\n\n    return getAppropriateTimeDifferenceText(todayDate, argDate)\n}","import React from 'react';\nimport { Card, ListGroupItem } from 'react-bootstrap';\n\nconst RoomListItem = ({ title, content, footer, key }) => {\n    const style = { backgroundColor: '#ededed' }\n\n    return (\n        <ListGroupItem key={key}>\n            <Card className='border-0' style={style}>\n                <Card.Body>\n                    <Card.Title>\n                        {title}\n                    </Card.Title>\n                    {content}\n                </Card.Body>\n                {\n                    footer ? <Card.Footer>{footer}</Card.Footer> : ''\n                }\n            </Card>\n        </ListGroupItem>\n    )\n}\n\nexport default RoomListItem;\n","import React from 'react';\nimport { Button, Row, Col } from 'react-bootstrap';\n\nconst ButtonWithLeadingIcon = ({ buttonProps, icon, content }) => {\n    return (\n        <Button {...buttonProps}>\n            <Row>\n                <Col>{icon}</Col>\n                <Col style={{ paddingLeft: 0, whiteSpace: 'nowrap' }}>\n                    {content}\n                </Col>\n            </Row>\n        </Button>\n    )\n}\n\nexport default ButtonWithLeadingIcon;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Button, ButtonGroup, Spinner } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\n\nimport ButtonWithLeadingIcon from '../../../components/ButtonWithLeadingIcon'\nimport { joinRoom } from '../../../server-communication/httpServer'\nimport showModal from '../../../actions/showModal'\nimport hideModal from '../../../actions/hideModal'\n\nclass RoomListItemActionsContainer extends React.Component {\n    state = { joinRoomStatus: 'initial' }\n\n    determineJoinButtonMetadata() {\n        let icon, content, variant = 'primary';\n\n        if (this.state.joinRoomStatus === 'pending') {\n            icon = <Spinner animation='border' size='sm' />\n            content = 'Joining...'\n        } else if (this.state.joinRoomStatus === 'success') {\n            icon = <FontAwesomeIcon icon={faCheckCircle} />\n            content = 'Joined'\n            variant = 'success'\n        } else if (this.state.joinRoomStatus === 'fail') {\n            icon = <FontAwesomeIcon icon={faTimesCircle} />\n            content = 'Join Failed'\n            variant = 'danger'\n        }\n\n        return { icon, content, variant }\n    }\n\n    onJoinButtonClick = () => {\n        const onSuccess = () => {\n            this.setState({ joinRoomStatus: 'success' })\n        }\n\n        const onFailure = ({ response }) => {\n            this.setState({ joinRoomStatus: 'fail' })\n            this.props.onError(response.message)\n        }\n\n        const { roomId } = this.props.room\n        joinRoom(roomId, onSuccess, onFailure)\n        this.setState({ joinRoomStatus: 'pending' })\n    }\n\n    onDeleteButtonClick = () => {\n        this.props.showModal('DeleteRoom', { room: this.props.room })\n    }\n\n    getActionsForRoomMember(roomMember, roomId) {\n        const adminActions = <Button variant='danger' onClick={this.onDeleteButtonClick}>Delete</Button>\n\n        const isRoomAdmin = (roomMember) => {\n            return roomMember && roomMember.memberType === 'admin'\n        }\n\n        return (\n            <ButtonGroup>\n                <Link to={`/rooms/${roomId}`} component={Button}>Open</Link>\n                {this.props.isUserLoggedIn && isRoomAdmin(roomMember) ? adminActions : null}\n            </ButtonGroup>\n        )\n    }\n\n    getActionsForNonRoomMember() {\n        console.log('status: ', this.state.joinRoomStatus)\n        if (this.state.joinRoomStatus === 'initial') {\n            return <Button onClick={this.onJoinButtonClick}>Join</Button>\n        }\n\n        const { icon, content, variant } = this.determineJoinButtonMetadata()\n        const buttonProps = { variant, disabled: true }\n        return <ButtonWithLeadingIcon icon={icon} content={content} buttonProps={buttonProps} />\n    }\n\n    render() {\n        const { room, currentUser } = this.props\n        const getMemberRefInRoom = (room, queryUserId) => {\n            return room.members.filter(roomMember => {\n                return roomMember && roomMember.user && roomMember.user._id === queryUserId\n            })\n        }\n\n        if (currentUser) {\n            const currentUserRoomMemberReference = getMemberRefInRoom(room, currentUser._id)[0]\n            if (!currentUserRoomMemberReference) {\n                return this.getActionsForNonRoomMember()\n            } else {\n                return this.getActionsForRoomMember(currentUserRoomMemberReference, room.roomId)\n            }\n        }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { currentUser: state.user.user, isUserLoggedIn: state.user.isLoggedIn }\n}\n\nexport default connect(mapStateToProps, { showModal, hideModal })(RoomListItemActionsContainer);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Row, Col } from 'react-bootstrap';\n\nimport convertISODateToReadableString from '../../helpers/convertISODateToReadableString';\nimport RoomListItem from '../../components/RoomListItem'\nimport RoomListItemActionsContainer from './RoomListItemActionsContainer';\n\nclass RoomListItemContainer extends React.Component {\n    state = { error: null }\n\n    renderRoomMetaData() {\n        const { room } = this.props\n        const roomOwner = room.createdBy\n        const roomCreatedBy = roomOwner ? roomOwner.username : '<unknown>'\n        const roomCreatedAt = convertISODateToReadableString(room.createdAt)\n\n        return `Created ${roomCreatedAt} by ${roomCreatedBy}`\n    }\n\n    renderComponentContent() {\n        return (\n            <Row>\n                <Col className='d-flex align-items-center'>\n                    <Card.Text>{this.renderRoomMetaData()}</Card.Text>\n                </Col>\n                <Col>\n                    <RoomListItemActionsContainer\n                        room={this.props.room}\n                        onError={(error) => this.setState({ error })}\n                    />\n                </Col>\n            </Row>\n        )\n    }\n\n    renderComponentTitle() {\n        const { room } = this.props\n        return <Link to={`/rooms/${room.roomId}`}>{room.name}</Link>\n    }\n\n    renderComponentFooter() {\n        const { error } = this.state\n        if (!error) {\n            return null\n        }\n        return (\n            <Row>\n                <Col style={{ color: 'red' }}>{error}</Col>\n            </Row>\n        )\n    }\n\n    render() {\n        return (\n            <RoomListItem\n                title={this.renderComponentTitle()}\n                content={this.renderComponentContent()}\n                footer={this.renderComponentFooter()}\n            />\n        )\n    }\n}\n\nexport default RoomListItemContainer;\n","import React from 'react'\nimport RoomListItemContainer from '../../containers/RoomListItemContainer'\nimport ListGroup from 'react-bootstrap/ListGroup'\n\nconst renderRoomList = (props) => {\n    return props.rooms.map((room) => <RoomListItemContainer room={room} key={room.roomId}/>)\n}\n\nconst RoomList = (props) => {\n    return <ListGroup variant='flush'>{renderRoomList(props)}</ListGroup>\n}\n\nexport default RoomList;\n","import React from 'react';\nimport { connect } from 'react-redux'\n\nimport RoomList from '../../components/RoomList';\nimport fetchPublicRooms from '../../actions/fetchPublicRooms'\n\nconst logger = require('../../helpers/logger')('[RoomListContainer]')\n\nclass RoomListContainer extends React.Component {\n    componentDidMount() {\n        this.props.fetchPublicRooms(this.onRoomFetchFail)\n    }\n\n    onRoomFetchFail = ({ response }) => {\n        logger.debug('RoomList fetch fail: ', response)\n    }\n\n    render() {\n        console.log(this.props.rooms)\n        return <RoomList rooms={this.props.rooms} />;\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { rooms: state.rooms }\n}\n\nexport default connect(mapStateToProps, { fetchPublicRooms })(RoomListContainer);\n","import { FETCH_PUBLIC_ROOMS } from '../constants/actionConstants'\nimport { getAllRooms } from '../server-communication/httpServer'\n\nexport default (onFailure) => async dispatch => {\n    getAllRooms((response) => {\n        dispatch({ type: FETCH_PUBLIC_ROOMS, payload: response.data })\n    }, onFailure)\n}","import React from 'react';\nimport { FormControl } from 'react-bootstrap'\nimport autosize from 'autosize'\n\nimport './style.scss'\n\nclass TextInputWordWrap extends React.Component {\n\n    componentDidMount() {\n        autosize(this.textareaRef)\n    }\n\n    render() {\n        return (\n            <FormControl\n                {...this.props}\n                {...this.props.input}\n                as='textarea'\n                rows='1'\n                className='text-input-wrap'\n                ref={el => this.textareaRef = el}\n            />\n        )\n    }\n}\n\nexport default TextInputWordWrap;\n","import React from 'react';\nimport { reduxForm, reset, Field } from 'redux-form';\nimport { Button, Form, Row, Col } from 'react-bootstrap';\n\nimport TextInputWordWrap from '../../TextInputWordWrap'\nimport './style.scss'\n\nconst FORM_ID = 'chat-message-form'\n\nconst renderMessageField = (formProps) => {\n    return (\n        <TextInputWordWrap {...formProps} />\n    );\n}\n\nconst ChatMessageForm = (props) => {\n    const onFormSubmit = props.handleSubmit(props.onFormSubmit)\n    return (\n        <Form onSubmit={onFormSubmit} id={FORM_ID}>\n            <Row className='d-flex align-items-center w-100'> \n                <Col sm={10} md={10} ld={10}>\n                    <Form.Group controlId='message' className='w-100 textarea-container'>\n                        <Field\n                            name='message'\n                            placeholder='Type a message...'\n                            type='text'\n                            component={renderMessageField}\n                        />\n                    </Form.Group>\n                </Col>\n                <Col sm={2} md={2} lg={2}>\n                    <Button type='submit' form={FORM_ID}>Send</Button>\n                </Col>\n            </Row>\n        </Form>\n    )\n}\n\nconst resetForm = (_/*result*/, dispatch) => {\n    dispatch(reset(FORM_ID))\n}\n\nexport default reduxForm({\n    form: FORM_ID,\n    onSubmitSuccess: resetForm\n})(ChatMessageForm);","import React from 'react'\nimport { ListGroup, Container } from 'react-bootstrap'\n\nimport './style.scss'\n\nconst Message = (props) => {\n    const { message, align, color, isCurrentUserMessageAuthor } = props\n    if (!message) {\n        return null\n    }\n\n    const getMessageAuthor = () => {\n        return isCurrentUserMessageAuthor ? 'You' : message.author && message.author.username ? message.author.username : '<unknown-user>'\n    }\n\n    const renderMessageArrow = () => {\n        const borderAttr = `15px solid ${color}`\n        const style = align === 'left' ? { borderRight: borderAttr } : { borderLeft: borderAttr }\n\n        return <p className={`arrow ${align}`} style={style} />\n    }\n\n    const messageAuthor = getMessageAuthor()\n    const messageArrow = renderMessageArrow()\n    return (\n        <ListGroup.Item key={message.id} style={{ border: \"none\" }}>\n            <Container className={`message float-${align}`} style={{ backgroundColor: color }}>\n                {align === 'left' && messageArrow}\n                {\n                    messageAuthor &&\n                    <p>\n                        <strong>{messageAuthor}</strong>\n                    </p>\n                }\n                <p>{message.data}</p>\n                {align === 'right' && messageArrow}\n            </Container>\n\n        </ListGroup.Item>\n    )\n}\n\nexport default Message","import React from 'react';\nimport { connect } from 'react-redux'\n\nimport Message from '../../components/Message'\n\nclass MessageContainer extends React.Component {\n    isCurrentUserMessageAuthor = () => {\n        const { message, userId } = this.props\n        return message && message.author && message.author._id === userId\n    }\n\n    render() {\n        const { message, color } = this.props\n        if (!message) {\n            return null\n        }\n\n        const messageAlignment = this.isCurrentUserMessageAuthor() ? 'right' : 'left'\n\n        return (\n            <Message\n                message={message}\n                align={messageAlignment}\n                color={color}\n                isCurrentUserMessageAuthor={this.isCurrentUserMessageAuthor()}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { userId: state.user.user._id }\n}\n\nexport default connect(mapStateToProps, null)(MessageContainer);\n","const colors = [\n    '#fff07c',\n    '#80ff72',\n    '#7ee8fa',\n    '#eec0c6',\n    '#e58c8a'\n]\n\nconst colorChoicesExhausted = (usedColors) => {\n    return colors.length === usedColors.length\n}\n\nconst isColorUsed = (usedColors, randomColor) => {\n    return usedColors.indexOf(randomColor) !== -1\n}\n\nconst getRandomColor = (usedColors) => {\n    let randomColor;\n    do {\n        let randomIndex = Math.floor(Math.random() * colors.length)\n        randomColor = colors[randomIndex]\n    } while (isColorUsed(usedColors, randomColor) && !colorChoicesExhausted(usedColors));\n    return randomColor\n}\n\nconst assignRandomly = (keys) => {\n    const assignedKeys = {}\n    const usedColors = []\n    keys.forEach(key => {\n        if (!assignedKeys[key]) {\n            const randomColor = getRandomColor(usedColors)\n            assignedKeys[key] = randomColor\n            if (!colorChoicesExhausted(usedColors)) usedColors.push(randomColor)\n        }\n    })\n\n    return assignedKeys\n}\n\nexport default assignRandomly","import React from 'react';\nimport { ListGroup } from 'react-bootstrap';\n\nimport MessageContainer from '../../containers/MessageContainer';\nimport assignRandomColors from './colors'\nimport './style.scss';\n\nclass ChatWindowContainer extends React.Component {\n    state = { randomAuthorColors: [] }\n\n    componentDidMount() {\n        const { room } = this.props\n        if (room) {\n            this.setState({\n                randomAuthorColors: this.assignRandomColorsToMessageAuthors(room)\n            })\n        }\n    }\n\n    assignRandomColorsToMessageAuthors(room) {\n        const messageAuthors = room.messages.map(message => message.author && message.author._id)\n        return assignRandomColors(messageAuthors)\n    }\n\n    render() {\n        const { room } = this.props\n\n        if (!room) {\n            return null\n        }\n\n        return (\n            <ListGroup className='chat-container pre-scrollable' variant=\"flush\">\n                {\n                    room.messages.map(message => {\n                        const messageAuthorColor = this.state.randomAuthorColors[message.author && message.author._id]\n                        return <MessageContainer\n                            color={messageAuthorColor}\n                            roomId={room.roomId}\n                            message={message}\n                            key={message && message._id}\n                        />\n                    })\n                }\n            </ListGroup>\n        )\n    }\n}\n\nexport default ChatWindowContainer;\n","import React from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSignOutAlt, faPlus} from '@fortawesome/free-solid-svg-icons'\nimport { Container, Col, Row } from 'react-bootstrap/';\n\nimport './style.scss'\n\nconst RoomInfoHeader = ({ room }) => {\n    if (!room) return null\n    console.log('room: ', room)\n    return (\n        <Container fluid>\n            <Row style={{ backgroundColor: '#ededed', height: '3.5vw' }}>\n                <Col>\n                    <span className='room-name'><strong>{room.name}</strong></span>\n                </Col>\n                <Col sm={2} lg={2} md={2} xl={2}>\n                    <Row>\n                        <Col sm={4} lg={4} md={4} xl={4} className=\"col-4\">\n                            <FontAwesomeIcon icon={faSignOutAlt} />\n                        </Col>\n                        <Col sm={4} lg={4} md={4} xl={4} className=\"col-4\">\n                            <FontAwesomeIcon icon={faPlus} />\n                        </Col>\n                    </Row>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default RoomInfoHeader","import React from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\n\nimport ChatMessageForm from '../../components/forms/ChatMessageForm';\nimport ChatWindowContainer from '../../containers/ChatWindowContainer'\n\nimport RoomInfoHeader from '../RoomInfoHeader';\n\nconst Room = () => {\n    const { room, onSendMessageButtonClick } = this.props\n    return (\n        <div style={{ border: '1px solid red', marginTop: '1vh', height: '100%' }}>\n            <RoomInfoHeader room={room} />\n            <Container fluid className='d-flex flex-column justify-content-center' style={{ height: '100%' }}>\n                <Row>\n                    <Col>\n                        <ChatWindowContainer room={room} />\n                    </Col>\n                </Row>\n\n                <Row>\n                    <Col style={{ backgroundColor: '#ededed' }}>\n                        <ChatMessageForm onFormSubmit={onSendMessageButtonClick} />\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    );\n}\n\n\nexport default Room;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button';\n\nimport '../style.scss'\n\nconst Forbidden = (props) => {\n    const msg = props.msg || 'You do not have the permissions required to view this page'\n    return (\n        <div className=\"error\">\n            {msg}\n            <Link to=\"/\">\n                <Button>Home</Button>\n            </Link>\n        </div>\n    );\n}\n\nexport default Forbidden;\n","import { sendMessage } from '../server-communication/socketServer'\nimport { addMessageToRoom } from '../server-communication/httpServer'\n\nexport default (roomId, message, onSuccess, onFailure) => {\n    addMessageToRoom(roomId, message, (response) => {\n        sendMessage(roomId, response._id)\n        onSuccess(response)\n    }, onFailure)\n}","import React from 'react';\nimport { Spinner } from 'react-bootstrap'\n\nimport Room from '../../components/Room';\nimport Forbidden from '../../components/errors/Forbidden'\nimport PageNotFound from '../../components/errors/PageNotFound'\nimport { getRoom } from '../../server-communication/httpServer'\nimport { connectToRoom, registerNewMessageListener } from '../../server-communication/socketServer'\nimport sendMessage from '../../helpers/sendMessage'\n\nclass RoomContainer extends React.Component {\n    state = {\n        room: null,\n        error: null\n    }\n\n    componentDidMount() {\n        const { roomId } = this.props;\n        registerNewMessageListener(roomId, (data) => {\n            console.log(\"new message: \", data)\n            getRoom(roomId, this.onRoomFetchSuccess, this.onRoomFetchFail)\n        })\n        getRoom(roomId, this.onRoomFetchSuccess, this.onRoomFetchFail)\n    }\n\n    componentDidUpdate() {\n        const { room } = this.state\n        if (room) {\n            connectToRoom(room.roomId, function (err) {\n                console.log('room connect callback: ', err)\n            })\n        }\n    }\n\n    onRoomFetchSuccess = (response) => {\n        this.setState({ room: response.data, error: null })\n    }\n\n    onRoomFetchFail = ({ response }) => {\n        this.setState({ error: response })\n    }\n\n    renderError() {\n        const { status } = this.state.error;\n        if (status === 403) {\n            return <Forbidden msg='User not allowed' />\n        }\n        else if (status === 404) {\n            return <PageNotFound />\n        }\n\n        return <div>Unexpected Error</div>\n    }\n\n    onSendMessageButtonClick = (formValues) => {\n        const { message } = formValues\n        if (!message || message.trim().length === 0) {\n            return null\n        } else {\n            const { room } = this.state\n            sendMessage(room.roomId, message, this.onSendMessageSuccess, this.onSendMessageFailure)\n        }\n    }\n\n    onSendMessageSuccess = (response) => {\n        this.setState({ room: response.data })\n    }\n\n    onSendMessageFailure = ({ response }) => {\n        this.setState({ error: response })\n    }\n\n    render() {\n        const { room, error } = this.state;\n        if (room) {\n            return <Room room={room} onSendMessageButtonClick={this.onSendMessageButtonClick} />;\n        }\n\n        if (error) {\n            return this.renderError()\n        }\n\n        return (\n            <div className='centered-content'>\n                <h2>Please wait while your Room is loading...</h2>\n                <Spinner animation='border' size='xl' />\n            </div>\n        );\n    }\n}\n\nexport default RoomContainer\n","import React from 'react';\nimport { Row, Col, Container } from 'react-bootstrap'\n\nimport RoomListContainer from '../RoomListContainer';\nimport RoomContainer from '../RoomContainer';\n\nconst styles = {\n    row: {\n        marginLeft: 0,\n        marginRight: 0,\n    },\n    container: {\n        paddingLeft: 0\n    }\n}\n\nconst roomListColProps = (roomId) => {\n    return roomId ? { xl: 5, lg: 5, md: 6, sm: 0, xs: 0, className: 'd-none d-md-block' } : {}\n}\n\nconst roomColProps = (roomId) => {\n    return roomId ? { xs: 12, sm: 12 } : {}\n}\n\nconst renderRoomCol = (roomId) => {\n    if (roomId) {\n        return (\n            <Col xl={7} lg={7} md={6} {...roomColProps(roomId)}>\n                <RoomContainer roomId={roomId} key={roomId} />\n            </Col>\n        )\n    }\n}\n\nconst renderRoomListCol = (roomId) => {\n    return (\n        <Col {...roomListColProps(roomId)} style={{ maxHeight: '90vh', overflow: 'scroll' }}>\n            <RoomListContainer />\n        </Col>\n    )\n}\n\nconst RoomAndRoomListWrapperContainer = (props) => {\n    const roomId = props.match.params.id\n    return (\n        <Container fluid style={styles.container}>\n            <Row style={styles.row}>\n                {renderRoomListCol(roomId)}\n                {renderRoomCol(roomId)}\n            </Row>\n        </Container>\n    )\n}\n\nexport default RoomAndRoomListWrapperContainer;\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport Layout from '../Layout';\nimport LandingPage from '../LandingPage';\nimport ServerConnectionFailed from '../errors/ServerConnectionFailed';\nimport PageNotFound from '../errors/PageNotFound';\nimport LoginContainer from '../../containers/LoginContainer';\nimport RegisterContainer from '../../containers/RegisterContainer';\nimport RoomAndRoomListWrapperContainer from '../../containers/RoomAndRoomListWrapperContainer';\n\nimport './App.scss';\n\n\nconst App = (props) => {\n\n    const renderBody = () => {\n        if (props.serverConnectionFailed) {\n            return <ServerConnectionFailed />;\n        }\n        return (\n            <Switch>\n                <Route exact path=\"/\" component={LandingPage} />\n                <Route exact path=\"/rooms/:id?\" component={RoomAndRoomListWrapperContainer} />\n                <Route exact path=\"/login\" component={LoginContainer} />\n                <Route exact path=\"/register\" component={RegisterContainer} />\n                <Route exact path=\"*\" component={PageNotFound} />\n            </Switch>\n        );\n    }\n\n    return (\n        <BrowserRouter>\n            <Layout>\n                {renderBody()}\n            </Layout>\n        </BrowserRouter>\n    );\n}\n\n\nexport default App;","import { UPDATE_USER } from '../constants/actionConstants'\n\nimport { getCurrentUser, checkLoginStatus } from '../server-communication/httpServer'\n\n\nconst actionUpdateUser = (isLoggedIn, user) => {\n    return {\n        type: UPDATE_USER,\n        payload: { isLoggedIn, user }\n    }\n}\n\nconst onGetCurrentUserSuccess = (userResponse, dispatch) => {\n    const onCheckLoginStatusSuccess = (loginResponse) => {\n        const user = userResponse.data\n        const isLoggedIn = loginResponse.data.isLoggedIn\n        dispatch(actionUpdateUser(isLoggedIn, user))\n    }\n\n    checkLoginStatus(onCheckLoginStatusSuccess, ({ response }) => console.log('Check user status fail: ', response))\n}\n\nexport default () => async dispatch => {\n    getCurrentUser(\n        (response) => onGetCurrentUserSuccess(response, dispatch),\n        ({ response }) => console.log('Get current user fail: ', response)\n    )\n}","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport App from '../../components/App';\nimport { onServerConnected, onServerDisconnected } from '../../server-communication/socketServer'\nimport connectToServer from '../../actions/connectToServer';\nimport updateUser from '../../actions/updateUser';\nimport createNotification from '../../actions/createNotification';\n\nclass AppContainer extends React.Component {\n    state = {\n        serverConnectionFailed: false\n    }\n\n    componentDidMount() {\n        this.props.connectToServer(this.onServerConnectionFailed);\n        onServerDisconnected(this.onServerDisconnected);\n        onServerConnected(this.onServerConnected);\n        this.props.updateUser()\n    }\n\n    onServerConnectionFailed = () => {\n        this.setState({ serverConnectionFailed: true })\n    }\n\n    onServerConnected = () => {\n        this.setState({ serverConnectionFailed: false })\n    }\n\n    onServerDisconnected = () => {\n        //TODO: Use redux store for this state as it affects the whole application\n        this.setState({ serverConnectionFailed: true })\n    }\n\n    render() {\n        return (\n            <App {...this.state} />\n        );\n    }\n}\n\nexport default connect(\n    null,\n    { connectToServer, createNotification, updateUser }\n)(AppContainer);\n","import {connectToServer} from '../server-communication/socketServer'\n\nimport { CONNECT_TO_SERVER } from '../constants/actionConstants'\n\nexport default (onConnectionFailed) => async (dispatch) => {\n    /*\n        TODO: This function will dispatch connected:true even if the connection may have failed.\n            Although the onConnectionFailed callback takes care of it,\n            the connection status should be either removed from redux store and use callback(s) only\n            or remove callback(s) and read/update the connection status from/on the redux store\n    */\n    await connectToServer(onConnectionFailed);\n    dispatch({ type: CONNECT_TO_SERVER, payload: { connected: true } })\n}\n","import { CREATE_NOTIFICATION } from \"../constants/actionConstants\";\n\nexport default (title, content, actions) => {\n    let action = {\n        type: CREATE_NOTIFICATION,\n        payload: { id: \"id\", title, content, actions }\n    };\n    console.log(\"action: \");\n    console.log(action)\n    return action;\n}","import React from 'react';\n\nimport Modal from 'react-bootstrap/Modal';\n\nconst GenericModal = (props) => {\n    return (\n        <Modal\n            show={props.visible}\n            onHide={props.hideModal}\n            centered\n        >\n            <Modal.Header closeButton onHide={props.hideModal}>\n                <Modal.Title>\n                    {props.header}\n                </Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                {props.content}\n            </Modal.Body>\n            <Modal.Footer>\n                {props.actions}\n            </Modal.Footer>\n        </Modal>\n    )\n}\n\nexport default GenericModal;\n","import { CREATE_ROOM } from '../constants/actionConstants';\n\nimport { createRoom } from '../server-communication/httpServer';\n\nconst attemptCreatingRoom = (roomName, roomType, onSuccess, onFailure) => async (dispatch) => {\n    createRoom(\n        roomName,\n        roomType,\n        (response) => {\n            dispatch({ type: CREATE_ROOM, payload: response.data })\n            onSuccess()\n        },\n        onFailure,\n    )\n}\n\nexport default attemptCreatingRoom;\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport { Form, FormGroup, FormControl, Alert } from 'react-bootstrap';\n\nimport validate from './validate';\n\nimport './CreateRoomForm.scss';\n\n\nconst radioOptions = [\n    { label: 'Private', value: 'private' },\n    { label: 'Public', value: 'public' },\n    { label: 'Unlisted', value: 'unlisted' }\n]\n\n\nconst renderRadioGroup = (formProps) => {\n    const { input, meta, options } = formProps;\n    const hasErrors = meta.touched && meta.error;\n    const impureFormNoErrors = !meta.pristine && !hasErrors;\n\n    const radioInputs = options.map(option => {\n        return (\n            <Form.Group controlId={`roomType-${option.value}`} key={option.value}>\n                <Form.Check\n                    {...input}\n                    {...option}\n                    type=\"radio\"\n                    isInvalid={hasErrors}\n                    isValid={impureFormNoErrors}\n                />\n            </Form.Group>\n        )\n    })\n\n    return (\n        <Form.Group controlId=\"create-room-form-type\">\n            <Form.Label><strong>Select Room Type:</strong></Form.Label>\n            {radioInputs}\n            {hasErrors && <Alert variant=\"danger\">{meta.error}</Alert>}\n        </Form.Group>\n    );\n}\n\n\nconst renderRoomNameField = (formProps) => {\n    const { input, meta } = formProps;\n    const hasErrors = meta.touched && meta.error;\n    const impureFormNoErrors = !meta.pristine && !hasErrors;\n\n    return (\n        <FormGroup controlId=\"create-room-form-name\">\n            <Form.Label><strong>{formProps.label}</strong></Form.Label>\n            <FormControl {...formProps} {...input} isInvalid={hasErrors} isValid={impureFormNoErrors} />\n            <Form.Control.Feedback size=\"lg\" type=\"invalid\">{meta.error}</Form.Control.Feedback>\n        </FormGroup>\n    );\n}\n\n\nconst CreateRoomForm = (props) => {\n    //Submit button resides in CreateRoomModal's Footer for better UI\n    return (\n        <Form noValidate id=\"create-room-form\" onSubmit={props.handleSubmit(props.onFormSubmit)}>\n            <Field\n                component={renderRoomNameField}\n                name=\"roomName\"\n                label=\"Enter Room Name:\"\n                placeholder=\"Example: room_for_dolphins\"\n                required\n            />\n            <hr />\n            <Field component={renderRadioGroup} options={radioOptions} name='roomType' />\n        </Form >\n    );\n}\n\n\nexport default reduxForm({\n    form: 'createRoomForm',\n    validate: validate\n})(CreateRoomForm)","export default (values) => {\n    const errors = {}\n    if (!values.roomName) {\n        errors.roomName = 'Room name cannot be empty'\n    }\n\n    if (!values.roomType) {\n        errors.roomType = 'Please choose one of the room types above'\n    }\n\n    return errors\n}","import React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport { connect } from 'react-redux';\n\nimport GenericModal from './GenericModal';\nimport createRoom from '../../actions/createRoom';\nimport hideModal from '../../actions/hideModal';\nimport CreateRoomForm from '../forms/CreateRoomForm/';\n\nimport DismissibleAlert from '../Alerts/DismissibleAlert';\n\nclass CreateRoomModal extends React.Component {\n    state = { alert: { show: false } }\n\n    onFormSubmit = ({ roomName, roomType }) => {\n        this.props.createRoom(roomName, roomType, this.onSuccess, this.onFailure);\n    }\n\n    onSuccess = () => {\n        this.showAlert('success', \"Your room was successfully created\");\n    }\n\n    onFailure = () => {\n        this.showAlert('danger', \"Oops! Your room couldn't be created\");\n    }\n\n    showAlert = (variant, body) => {\n        this.setState({\n            alert:\n            {\n                show: true,\n                variant: variant,\n                body: body\n            }\n        })\n    }\n\n    hideAlert = () => {\n        this.setState({ alert: { show: false } })\n    }\n\n    onCancelButtonClick = () => {\n        this.hideAlert();\n        this.props.hideModal();\n    }\n\n    getModalActions() {\n        return (\n            <>\n                <Button variant='secondary' onClick={this.onCancelButtonClick}>Cancel</Button>\n                <Button form='create-room-form' type='submit'>Create Room</Button>\n            </>\n        );\n    }\n\n    getAlertDismissAction = () => {\n        if (!this.state.alert.show) {\n            return null;\n        }\n\n        if (this.state.alert.variant === 'danger') {\n            return null;\n        }\n\n        return (\n            <Button\n                variant='outline-success'\n                onClick={() => {\n                    this.hideAlert();\n                    this.props.hideModal();\n                }}\n            >\n                Back to home\n            </Button>\n        )\n    }\n\n    getModalContent() {\n        return (\n            <>\n                <DismissibleAlert\n                    {...this.state.alert}\n                    onDismiss={this.hideAlert}\n                    dismissAction={this.getAlertDismissAction}\n                />\n                <CreateRoomForm onFormSubmit={this.onFormSubmit} />\n            </>\n        )\n    }\n\n    render() {\n        return (\n            <GenericModal\n                header=\"Create Room\"\n                actions={this.getModalActions()}\n                content={this.getModalContent()}\n                visible={this.props.isModalVisible}\n                hideModal={this.props.hideModal}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { isModalVisible: state.modal.isModalOpen && state.modal.modalName === 'CreateRoom' }\n}\n\nexport default connect(\n    mapStateToProps,\n    { createRoom, hideModal }\n)(CreateRoomModal);\n\n","import { JOIN_ROOM } from '../constants/actionConstants';\n\nimport { joinRoom } from '../server-communication/socketServer';\n\nconst tryJoiningRoom =\n    (roomId, onSuccess, onPermissionPending, onPermissionRequestCompleted, onFailure) =>\n        async dispatch => {\n            await joinRoom(roomId, (data) => {\n                if (data.status === \"ok\") {\n                    dispatch({ type: JOIN_ROOM, payload: roomId });\n                    onSuccess();\n                }\n                else if (data.status === \"permission_pending\") {\n                    onPermissionPending();\n                    //onRoomJoinPermissionRecieved(onPermissionRequestCompleted);\n                }\n                else {\n                    onFailure(data.reason);\n                }\n            });\n        }\n\nexport default tryJoiningRoom;","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport GenericModal from './GenericModal';\nimport tryJoiningRoom from '../../actions/tryJoiningRoom';\nimport hideModal from '../../actions/hideModal';\n\nclass JoinRoomModal extends React.Component {\n    state = { inputValue: \"\", isFormLoading: false }\n\n    onFormSubmit = (event) => {\n        event.preventDefault();\n        this.setState({ isFormLoading: true });\n        this.props.tryJoiningRoom(\n            this.state.inputValue,\n            this.props.onSuccess,\n            this.props.onPermissionPending,\n            this.props.onJoinRoomPermissionRecieved,\n            this.props.onFailure\n        )\n    }\n\n    inputChanged = (e) => {\n        this.setState({\n            inputValue: e.target.value,\n            errorMessage: null\n        })\n    }\n\n    onCancelButtonClick = () => {\n        this.setState({ inputValue: \"\", isFormLoading: false });\n        this.props.hideModal();\n    }\n\n    getModalActions() {\n        const disabled = this.state.isFormLoading ? \"disabled\" : \"\";\n        return (\n            <React.Fragment>\n                <button className=\"ui button\" onClick={this.onCancelButtonClick}>\n                    Cancel\n                </button>\n\n                <button type=\"submit\" form=\"join-room-form\" className={`ui button orange ${disabled}`}>\n                    Join\n                </button>\n            </React.Fragment>\n        );\n    }\n\n    getModalContent() {\n        const loading = this.state.isFormLoading ? \"loading\" : \"\";\n        return (\n            <form className={`ui form ${loading}`} id=\"join-room-form\" onSubmit={this.onFormSubmit}>\n                <div className=\"required field\">\n                    <label>Enter Room ID:</label>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Room Number\"\n                        value={this.state.inputValue}\n                        onChange={this.inputChanged}\n                        autoFocus={true}\n                        required={true}\n                    />\n                </div>\n            </form>\n        );\n    }\n\n    render() {\n        return (\n            <GenericModal\n                header=\"Join Room\"\n                actions={this.getModalActions()}\n                content={this.getModalContent()}\n                visible={this.props.isModalVisible}\n                hideModal={this.props.hideModal}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return { isModalVisible: state.modal.isModalOpen && state.modal.modalName === 'JoinRoom' }\n}\n\nexport default connect(mapStateToProps, { tryJoiningRoom, hideModal })(JoinRoomModal);\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport { Form, FormGroup, FormControl } from 'react-bootstrap';\n\n\nclass DeleteRoomForm extends React.Component {\n    mustMatchRoomName = (value) => {\n        const { room } = this.props\n        return room && value === room.name ? undefined : 'Room name not equal'\n    }\n\n    renderRoomNameField = (formProps) => {\n        return (\n            <FormGroup controlId=\"delete-room-form-name\">\n                <Form.Label><strong>{formProps.label}</strong></Form.Label>\n                <FormControl {...formProps} {...formProps.input} />\n            </FormGroup>\n        );\n    }\n\n    render() {\n        return (\n            <Form noValidate id=\"delete-room-form\" onSubmit={this.props.handleSubmit(this.props.onFormSubmit)} >\n                <Field\n                    component={this.renderRoomNameField}\n                    name=\"roomName\"\n                    label=\"Room Name:\"\n                    placeholder=\"Enter Room name here\"\n                    required\n                    validate={this.mustMatchRoomName}\n                />\n            </Form>\n        );\n    }\n}\n\nexport default reduxForm({\n    form: 'deleteRoomForm',\n})(DeleteRoomForm)","import React from 'react';\nimport { Button, Row, Col, Spinner } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\n\nimport GenericModal from './GenericModal';\nimport DeleteRoomForm from '../forms/DeleteRoomForm';\nimport ButtonWithLeadingIcon from '../ButtonWithLeadingIcon'\n\nimport hideModal from '../../actions/hideModal';\nimport deleteRoom from '../../actions/deleteRoom'\n\nclass DeleteRoomModal extends React.Component {\n    state = { deleteRoomStatus: 'initial' }\n\n    onFormSubmit = (formValues) => {\n        console.log('formValues: ', formValues)\n        const { room } = this.props.modalProps\n        if (!room) {\n            this.setState({ deleteRoomStatus: 'fail' })\n        }\n\n        this.props.deleteRoom(room.roomId, this.onDeleteRoomSuccess, this.onDeleteRoomFail)\n        this.setState({ deleteRoomStatus: 'pending' })\n    }\n\n    onDeleteRoomSuccess = () => {\n        this.setState({ deleteRoomStatus: 'success' })\n    }\n\n    onDeleteRoomFail = ({ response }) => {\n        console.log('fail: ', response)\n        this.setState({ deleteRoomStatus: 'fail' })\n    }\n\n    onCancelButtonClick = () => {\n        if (this.state.deleteRoomStatus === 'success') {\n            this.props.onDeleteRoomSuccess()\n        }\n\n        this.props.hideModal();\n    }\n\n    getDeleteButtonMeta() {\n        const { deleteRoomForm } = this.props\n        const syncErrors = deleteRoomForm ? deleteRoomForm.syncErrors : null\n        const hasErrors = syncErrors && syncErrors.roomName\n\n        switch (this.state.deleteRoomStatus) {\n            case 'initial':\n                return {\n                    variant: 'danger',\n                    disabled: hasErrors,\n                    style: {\n                        cursor: hasErrors ? 'not-allowed' : 'pointer'\n                    },\n                    form: 'delete-room-form',\n                    type: 'submit'\n                }\n            case 'pending':\n                return {\n                    variant: 'info',\n                    disabled: true,\n                    style: {\n                        cursor: 'not-allowed'\n                    }\n                }\n            case 'success':\n                return {\n                    variant: 'success',\n                    disabled: true,\n                    style: {\n                        cursor: 'not-allowed'\n                    }\n                }\n            case 'fail':\n                return {\n                    variant: 'danger',\n                    disabled: true,\n                    style: {\n                        cursor: 'not-allowed'\n                    }\n                }\n            default:\n                return null\n        }\n    }\n\n    getPropsForButtonWithLeadingIcon = () => {\n        let icon, content\n        switch (this.state.deleteRoomStatus) {\n            case 'pending':\n                icon = <Spinner animation='border' size='sm' />\n                content = 'Deleting Room...'\n                break;\n            case 'success':\n                icon = <FontAwesomeIcon icon={faCheckCircle} />\n                content = 'Room Deleted'\n                break;\n            case 'fail':\n                icon = <FontAwesomeIcon icon={faTimesCircle} />\n                content = 'Room Deletion Failed'\n                break;\n            default:\n                return {}\n        }\n\n        return { icon, content }\n    }\n\n    renderDeleteButton() {\n        const buttonProps = this.getDeleteButtonMeta()\n        const buttonWithLeadingIconProps = {\n            ...this.getPropsForButtonWithLeadingIcon(),\n            buttonProps\n        }\n\n        switch (this.state.deleteRoomStatus) {\n            case 'initial':\n                return <Button {...buttonProps}>Delete Room</Button>\n            default:\n                return <ButtonWithLeadingIcon  {...buttonWithLeadingIconProps} />\n        }\n    }\n\n    getModalActions() {\n        const { deleteRoomStatus } = this.state\n        const taskCompleted = deleteRoomStatus === 'success' || deleteRoomStatus === 'fail'\n        const cancelButtonText = taskCompleted ? 'Go Back' : 'Cancel'\n        return (\n            <>\n                <Button variant='outline-secondary' onClick={this.onCancelButtonClick}>{cancelButtonText}</Button>\n                {this.renderDeleteButton()}\n            </>\n        )\n    }\n\n    getModalContent() {\n        const { room } = this.props.modalProps\n        const roomName = room ? room.name : '<unknown>'\n        return (\n            <Row>\n                <Col sm={12}>\n                    <DeleteRoomForm onFormSubmit={this.onFormSubmit} room={room} />\n                </Col>\n                <Col>\n                    To delete the room <strong>{roomName}</strong> type in the name of the room above\n                </Col>\n            </Row>\n        )\n    }\n\n    render() {\n        return (\n            <GenericModal\n                header=\"Delete Room\"\n                actions={this.getModalActions()}\n                content={this.getModalContent()}\n                visible={this.props.isModalVisible}\n                hideModal={this.props.hideModal}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    const { modal } = state\n    return {\n        isModalVisible: modal.isModalOpen && modal.modalName === 'DeleteRoom',\n        modalProps: modal.modalProps,\n        deleteRoomForm: state.form.deleteRoomForm\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    { hideModal, deleteRoom }\n)(DeleteRoomModal);\n\n","import { deleteRoom } from '../server-communication/httpServer'\nimport { DELETE_ROOM } from '../constants/actionConstants'\n\nexport default (roomId, onSuccess, onFailure) => async dispatch => {\n    deleteRoom(roomId).then(_ => {\n        onSuccess()\n        dispatch({ type: DELETE_ROOM, payload: roomId })\n    }).catch(onFailure)\n}","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport CreateRoomModal from '../../components/modals/CreateRoomModal'\nimport JoinRoomModal from '../../components/modals/JoinRoomModal'\nimport DeleteRoomModal from '../../components/modals/DeleteRoomModal'\n\nconst getModalComponentToShow = (modalName) => {\n    switch (modalName) {\n        case 'CreateRoom':\n            return <CreateRoomModal />\n        case 'JoinRoom':\n            return <JoinRoomModal />\n        case 'DeleteRoom':\n            return <DeleteRoomModal />\n        default:\n            return null\n    }\n}\n\nconst ModalContainer = (props) => {\n    if (!props.modal.isModalOpen) {\n        return null\n    }\n\n    return getModalComponentToShow(props.modal.modalName)\n}\n\nconst mapStateToProps = (state) => {\n    return { modal: state.modal }\n}\n\nexport default connect(mapStateToProps)(ModalContainer);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducers from './reducers'\nimport AppContainer from './containers/AppContainer';\nimport ModalContainer from './containers/ModalContainer';\n\nconst composeEnhanchers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, composeEnhanchers(\n    applyMiddleware(thunk)\n));\n\nReactDOM.render(\n    <Provider store={store}>\n        <AppContainer />\n        <ModalContainer />\n    </Provider>,\n    document.querySelector(\"#root\")\n);"],"sourceRoot":""}